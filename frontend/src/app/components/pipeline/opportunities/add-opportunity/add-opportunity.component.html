
<h1 mat-dialog-title cdkDrag cdkDragRootElement=".cdk-overlay-pane" cdkDragHandle>Oportunidad: <span>{{data.name ? data.name : 'Nueva'}}</span></h1>

<div mat-dialog-content >

  <form class="mat-dialog-content" (ngSubmit)="submit" #formControl="ngForm">

    <!--<div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>date_entered</mat-label><input matInput #input class="form-control" placeholder="date_entered" [(ngModel)]="data.date_entered" name="date_entered"  ><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div>-->
    <!--<div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>date_modified</mat-label><input matInput #input class="form-control" placeholder="date_modified" [(ngModel)]="data.date_modified" name="date_modified"  ><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div>-->
    <!--<div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>modified_user_id</mat-label><input matInput #input class="form-control" placeholder="modified_user_id" [(ngModel)]="data.modified_user_id" name="modified_user_id"  ><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div>-->
    <!--<div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>created_by</mat-label><input matInput #input class="form-control" placeholder="created_by" [(ngModel)]="data.created_by" name="created_by"  ><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div>-->
    <!--<div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>deleted</mat-label><input matInput #inputstate class="form-control" placeholder="deleted" [(ngModel)]="data.deleted" name="deleted" maxlength="10"  ><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error><mat-hint align="end">{{inputstate.value?.length || 0}}/8</mat-hint></mat-form-field></div>-->
    <!--<div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>salutation</mat-label><input matInput #input class="form-control" placeholder="salutation" [(ngModel)]="data.salutation" name="salutation"  ><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div>-->

    <!--<div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>description</mat-label><input matInput #inputstate class="form-control" placeholder="description" [(ngModel)]="data.description" name="description" maxlength="10"  ><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error>       <mat-hint align="end">{{inputstate.value?.length || 0}}/8</mat-hint></mat-form-field></div>-->

    <div class="example-action-buttons">
      <button mat-button (click)="accordion.openAll()">Expand All</button>
      <button mat-button (click)="accordion.closeAll()">Collapse All</button>
    </div>

    <mat-accordion class="example-headers-align" multi>

      <mat-expansion-panel><mat-expansion-panel-header><mat-panel-title>Datos del Contacto</mat-panel-title><mat-panel-description><mat-icon>date_range</mat-icon></mat-panel-description></mat-expansion-panel-header>
        <mat-grid-list [cols]="pilatService.isSmallScreen ? '1' : '2'" rowHeight="6:2">
          <mat-grid-tile><div class="foparTipoPagorm"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Nombre</mat-label><input matInput #input class="form-control" placeholder="Nombre" [(ngModel)]="data.opportunityOpportunitiesContacts.opportunityContactContacts.first_name" name="first_name" required ><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
          <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Apellido</mat-label><input matInput #input class="form-control" placeholder="Apellido" [(ngModel)]="data.opportunityOpportunitiesContacts.opportunityContactContacts.last_name" name="last_name" required ><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
          <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Celular</mat-label><input matInput #input class="form-control" placeholder="Celular" [(ngModel)]="data.opportunityOpportunitiesContacts.opportunityContactContacts.phone_mobile" name="phone_mobile" required ><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
          <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Telefono Oficina</mat-label><input matInput #input class="form-control" placeholder="Telefono oficina" [(ngModel)]="data.opportunityOpportunitiesContacts.opportunityContactContacts.phone_work" name="phone_work" ><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
          <mat-grid-tile colspan="2"><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Direccion</mat-label><input matInput #input class="form-control" placeholder="Direccion" [(ngModel)]="data.opportunityOpportunitiesContacts.opportunityContactContacts.primary_address_street" name="primary_address_street" required ><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
          <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Pais</mat-label><mat-select placeholder="Pais"  [(ngModel)]="data.opportunityOpportunitiesContacts.opportunityContactContacts.primary_address_country" name="primary_address_country" required>
            <mat-option *ngFor="let parCountry of pilatService.parCountries" [value]="parCountry.par_cod" required >{{parCountry.par_description}}</mat-option>
          </mat-select></mat-form-field></div></mat-grid-tile>
          <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Departamentto</mat-label><mat-select placeholder="Departamento"  [(ngModel)]="data.opportunityOpportunitiesContacts.opportunityContactContacts.primary_address_state" name="primary_address_state" required>
            <mat-option *ngFor="let parState of pilatService.parStates" [value]="parState.par_cod" required >{{parState.par_description}}</mat-option>
          </mat-select></mat-form-field></div></mat-grid-tile>
          <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Ciudad</mat-label><mat-select placeholder="Ciudad"  [(ngModel)]="data.opportunityOpportunitiesContacts.opportunityContactContacts.primary_address_city" name="primary_address_city" required>
            <mat-option *ngFor="let parCity of pilatService.parCities" [value]="parCity.par_cod" required >{{parCity.par_description}}</mat-option>
          </mat-select></mat-form-field></div></mat-grid-tile>
          <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Cargo</mat-label><input matInput #input class="form-control" placeholder="Cargo" [(ngModel)]="data.opportunityOpportunitiesContacts.opportunityContactContacts.title" name="title" ><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
          <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Toma de contacto</mat-label><input matInput #input class="form-control" placeholder="Toma de contacto" [(ngModel)]="data.opportunityOpportunitiesContacts.opportunityContactContacts.lead_source" name="lead_source" ><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
          <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Correo electronico</mat-label><input matInput #input class="form-control" placeholder="Correo electrónico" [(ngModel)]="data.opportunityOpportunitiesContacts.opportunityContactContacts.contactEmailAddrBeanRel.emailAddrBeanRelEmailAddresses.email_address" name="email_address"><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
          <!--<mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Fecha de cumpleaños</mat-label><input matInput #input class="form-control" placeholder="birthdate" [(ngModel)]="data.opportunityOpportunitiesContacts.opportunityContactContacts.birthdate" name="birthdate" required [matDatepicker]="birthdate"><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error><mat-datepicker-toggle matSuffix [for]="birthdate"></mat-datepicker-toggle><mat-datepicker #birthdate></mat-datepicker></mat-form-field></div></mat-grid-tile>-->
        </mat-grid-list>
      </mat-expansion-panel>

      <mat-expansion-panel><mat-expansion-panel-header><mat-panel-title>Datos del Cliente</mat-panel-title><mat-panel-description><mat-icon>date_range</mat-icon></mat-panel-description></mat-expansion-panel-header>
        <mat-grid-list [cols]="pilatService.isSmallScreen ? '1' : '2'" rowHeight="6:2">
          <mat-grid-tile colspan="2"><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Nombre</mat-label><input matInput #input class="form-control" placeholder="Nombre" [(ngModel)]="data.opportunityAccountsOpportunities.accountOpportunityAccounts.name" name="accountName" required ><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
          <mat-grid-tile colspan="2"><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Descripción</mat-label><input matInput #input class="form-control" placeholder="Descripción" [(ngModel)]="data.opportunityAccountsOpportunities.accountOpportunityAccounts.description" name="accountDescription" ><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
          <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Celular</mat-label><input matInput #input class="form-control" placeholder="Celular" [(ngModel)]="data.opportunityAccountsOpportunities.accountOpportunityAccounts.phone_alternate" name="phone_alternate" required ><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
          <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Telefono Oficina</mat-label><input matInput #input class="form-control" placeholder="Telefono de Trabajo" [(ngModel)]="data.opportunityAccountsOpportunities.accountOpportunityAccounts.phone_office" name="phone_office" ><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
          <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Número Documento</mat-label><input matInput #input class="form-control" placeholder="Número documento " [(ngModel)]="data.opportunityAccountsOpportunities.accountOpportunityAccounts.accountAccountsCstm.numero_documento_c" name="numero_documento_c" ><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
          <mat-grid-tile>
            <div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Extención</mat-label><mat-select [(ngModel)]="data.opportunityAccountsOpportunities.accountOpportunityAccounts.accountAccountsCstm.extension_documento_c" name="extencion">
              <mat-option *ngFor="let parCiExtention of pilatService.parCiExtentions" [value]="parCiExtention.par_cod" required >{{parCiExtention.par_description}}</mat-option>
            </mat-select></mat-form-field></div>
          </mat-grid-tile>
          <mat-grid-tile colspan="2"><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Dirección</mat-label><input matInput #input class="form-control" placeholder="Direccion" [(ngModel)]="data.opportunityAccountsOpportunities.accountOpportunityAccounts.billing_address_street" name="billing_address_street" required ><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
          <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Pais</mat-label><mat-select placeholder="Pais"  [(ngModel)]="data.opportunityAccountsOpportunities.accountOpportunityAccounts.billing_address_country" name="billing_address_country" required>
            <mat-option *ngFor="let parCountry of pilatService.parCountries" [value]="parCountry.par_cod" required >{{parCountry.par_description}}</mat-option>
          </mat-select></mat-form-field></div></mat-grid-tile>
          <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Departamentto</mat-label><mat-select placeholder="Departamento"  [(ngModel)]="data.opportunityAccountsOpportunities.accountOpportunityAccounts.billing_address_state" name="billing_address_state" required>
            <mat-option *ngFor="let parState of pilatService.parStates" [value]="parState.par_cod" required >{{parState.par_description}}</mat-option>
          </mat-select></mat-form-field></div></mat-grid-tile>
          <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Ciudad</mat-label><mat-select placeholder="Ciudad"  [(ngModel)]="data.opportunityAccountsOpportunities.accountOpportunityAccounts.billing_address_city" name="billing_address_city" required>
            <mat-option *ngFor="let parCity of pilatService.parCities" [value]="parCity.par_cod" required >{{parCity.par_description}}</mat-option>
          </mat-select></mat-form-field></div></mat-grid-tile>
        </mat-grid-list>
      </mat-expansion-panel>

      <mat-expansion-panel [expanded]="true"><mat-expansion-panel-header><mat-panel-title>Datos de la oportunidad</mat-panel-title> <mat-panel-description><mat-icon>date_range</mat-icon></mat-panel-description></mat-expansion-panel-header>
        <mat-grid-list [cols]="pilatService.isSmallScreen ? '1' : '2'" rowHeight="6:2">

          <!--<div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Origen</mat-label><mat-select placeholder="lead_source"  [(ngModel)]="data.lead_source" name="lead_source">-->
            <!--<mat-option *ngFor="let parLeadSource of parLeadSources" [value]="parLeadSource.par_cod" required >{{parLeadSource.par_description}}</mat-option>-->
          <!--</mat-select></mat-form-field></div>-->
          <!--<div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>lead_source</mat-label><input matInput #input class="form-control" placeholder="lead_source" [(ngModel)]="data.lead_source" name="lead_source" required ><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div>-->
          <!--<div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>amount_usdollar</mat-label><input matInput #input class="form-control" placeholder="amount_usdollar" [(ngModel)]="data.amount_usdollar" name="amount_usdollar" required  type="number"><span matPrefix>$&nbsp; </span><span matSuffix>.00</span><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div>-->
          <!--<div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>currency_id</mat-label><input matInput #input class="form-control" placeholder="currency_id" [(ngModel)]="data.currency_id" name="currency_id" required ><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div>-->
          <!--<div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>sales_stage</mat-label><input matInput #input class="form-control" placeholder="sales_stage" [(ngModel)]="data.sales_stage" name="sales_stage" required [disabled]="true"><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div>-->

          <!--<mat-list>-->
              <mat-grid-tile colspan="2"><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Nombre</mat-label><input matInput #input class="form-control" placeholder="Nombre" [(ngModel)]="data.name" name="opportunityName" required ><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
              <mat-grid-tile colspan="2"><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Descrippción</mat-label><input matInput #input class="form-control" placeholder="Descripción" [(ngModel)]="data.description" name="opportunityDescription" ><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
            <!--<mat-list-item>-->
              <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Unidad Industrial (UV)</mat-label><input matInput #input class="form-control" placeholder="Unidad Industrial (UV)" [(ngModel)]="data.opportunityOpportunitiesCstm.unidad_industrial_c" name="opportunity_unidad_industrial_c" required  type="number" [min]="0" [max]="100"><span matPrefix>&nbsp;</span><span matSuffix></span><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
              <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Manzano</mat-label><input matInput #input class="form-control" placeholder="Manzano" [(ngModel)]="data.opportunityOpportunitiesCstm.manzano_c" name="opportunity_manzano_c" required  type="number" [min]="0" [max]="100"><span matPrefix>&nbsp;</span><span matSuffix></span><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
              <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Ubicación (Lote)</mat-label><input matInput #input class="form-control" placeholder="Ubicacion (Lote)" [(ngModel)]="data.opportunityOpportunitiesCstm.ubicacion_c" name="opportunity_ubicacion_c" required  type="text" [min]="0" [max]="100"><span matPrefix>&nbsp;</span><span matSuffix></span><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
              <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Superficie (m2)</mat-label><input matInput #input class="form-control" placeholder="Superficie (m2)" [(ngModel)]="data.opportunityOpportunitiesCstm.superficie_c" name="opportunity_superficie_c" required  type="number" [min]="0" [max]="100"><span matPrefix>&nbsp;</span><span matSuffix></span><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
            <!--</mat-list-item>-->
            <!--<mat-divider></mat-divider>-->
            <!--<mat-list-item>-->
              <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Precio Total</mat-label><input matInput #input class="form-control" placeholder="Monto" [(ngModel)]="data.amount" name="amount" required  type="number"><span matPrefix>{{parCurrentCurrency.par_cod ? parCurrentCurrency.par_cod : data.currency_id}}. </span><span matSuffix>.00</span><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
              <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Moneda</mat-label><mat-select placeholder="Moneda"  [(ngModel)]="data.currency_id" name="currency_id" (ngModelChange)="selectCurrency($event)" required>
                <mat-option *ngFor="let parCurrency of pilatService.parCurrencies" [value]="parCurrency.par_cod" required >{{parCurrency.par_description}}</mat-option>
              </mat-select></mat-form-field></div></mat-grid-tile>
              <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Etapa de Venta</mat-label><mat-select placeholder="Etapa" [(ngModel)]="data.sales_stage" name="sales_stage" required>
                <mat-option *ngFor="let parOpportunityStage of pilatService.parOpportunityStages" [value]="parOpportunityStage.par_cod" required >{{parOpportunityStage.par_description}}</mat-option>
              </mat-select></mat-form-field></div></mat-grid-tile>
              <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Tipo de Venta</mat-label><mat-select placeholder="Tipo de venta" [(ngModel)]="data.opportunityOpportunitiesCstm.tipo_venta_c" name="tipo_venta_c" required>
                <mat-option *ngFor="let parVentaTipo of pilatService.parVentaTipos" [value]="parVentaTipo.par_cod" required >{{parVentaTipo.par_description}}</mat-option>
              </mat-select></mat-form-field></div></mat-grid-tile>
              <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Tipo de Oportunidad</mat-label><mat-select placeholder="Tipo de venta" [(ngModel)]="data.opportunity_type" name="opportunity_type" required>
                <mat-option *ngFor="let parOpportunityTipo of pilatService.parOpportunityTipos" [value]="parOpportunityTipo.par_cod" required >{{parOpportunityTipo.par_description}}</mat-option>
              </mat-select></mat-form-field></div></mat-grid-tile>
              <!--<mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Titulos</mat-label><mat-select placeholder="Titulo" [(ngModel)]="data.opportunity_type" name="opportunity_type">-->
                <!--<mat-option *ngFor="let parTitle of pilatService.parTitles" [value]="parTitle.par_cod" required >{{parTitle.par_description}}</mat-option>-->
              <!--</mat-select></mat-form-field></div></mat-grid-tile>-->
              <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Valida hasta</mat-label><input matInput #input class="form-control" placeholder="Valida Hasta" [(ngModel)]="data.date_closed" name="date_closed" required [matDatepicker]="date_closed" required><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error><mat-datepicker-toggle matSuffix [for]="date_closed"></mat-datepicker-toggle><mat-datepicker #date_closed></mat-datepicker></mat-form-field></div></mat-grid-tile>
              <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>probability</mat-label><input matInput #input class="form-control" placeholder="Probabilidad" [(ngModel)]="data.probability" name="probability" required  type="number" [min]="0" [max]="100"><span matPrefix>&nbsp;</span><span matSuffix>%</span><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
            <!--</mat-list-item>-->
          <!--</mat-list>-->
        </mat-grid-list>
      </mat-expansion-panel>

      <mat-expansion-panel><mat-expansion-panel-header><mat-panel-title>Datos de la Cotización</mat-panel-title><mat-panel-description><mat-icon>date_range</mat-icon></mat-panel-description></mat-expansion-panel-header>
        <mat-grid-list [cols]="pilatService.isSmallScreen ? '1' : '2'" rowHeight="6:2">


          <!--<mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Estado de aprobación</mat-label><mat-select placeholder="Estado de aprobación" [(ngModel)]="data.opportunityAosQuotes.approval_status" name="approval_status">-->
            <!--<mat-option *ngFor="let parApprobalStatus of parApprobalStatuses" [value]="parApprobalStatus.par_cod"  >{{parApprobalStatus.par_description}}</mat-option>-->
          <!--</mat-select></mat-form-field></div></mat-grid-tile>-->

          <!--<mat-list>-->
            <!--<mat-list-item>-->
              <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Nro de Cotización</mat-label><input matInput #input class="form-control" placeholder="number" [(ngModel)]="data.opportunityAosQuotes.number" name="number" disabled><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
              <mat-grid-tile colspan="2"><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Nombre</mat-label><input matInput #input class="form-control" placeholder="Nombre" [(ngModel)]="data.opportunityAosQuotes.name" name="aoQuoteName" required ><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
              <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Valida Hasta</mat-label><input matInput #input class="form-control" placeholder="Valida Hasta" [(ngModel)]="data.opportunityAosQuotes.expiration" name="expiration" required [matDatepicker]="expiration"><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error><mat-datepicker-toggle matSuffix [for]="expiration"></mat-datepicker-toggle><mat-datepicker #expiration></mat-datepicker></mat-form-field></div></mat-grid-tile>
              <!--<mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Fecha de envio programada</mat-label><input matInput #input class="form-control" placeholder="Fecha envio Programada" [(ngModel)]="data.opportunityAosQuotes.aoQuoteAosQuotesCstm.fecha_envio_programada_c" name="fecha_envio_programada_c" required [matDatepicker]="fecha_envio_programada_c"><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error><mat-datepicker-toggle matSuffix [for]="fecha_envio_programada_c"></mat-datepicker-toggle><mat-datepicker #fecha_envio_programada_c></mat-datepicker></mat-form-field></div></mat-grid-tile>-->
              <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Etapa de la Cotización</mat-label><mat-select placeholder="Etapa de la cotización" [(ngModel)]="data.opportunityAosQuotes.stage" name="stage">
                <mat-option *ngFor="let parQuoteStage of pilatService.parQuoteStages" [value]="parQuoteStage.par_cod"  >{{parQuoteStage.par_description}}</mat-option>
              </mat-select></mat-form-field></div></mat-grid-tile>
            <!--</mat-list-item>-->
            <!--<mat-divider></mat-divider>-->
            <!--<mat-list-item>-->
              <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Estado de la Aprobacion</mat-label><mat-select placeholder="Estado de la Aprobacion" [(ngModel)]="data.opportunityAosQuotes.approval_status" name="approval_status" (ngModelChange)="selectApprovalStatus($event)" required>
                <mat-option *ngFor="let parApprobalStatus of pilatService.parApprovalStatuses" [value]="parApprobalStatus.par_cod" required >{{parApprobalStatus.par_description}}</mat-option>
              </mat-select></mat-form-field></div></mat-grid-tile>

              <mat-grid-tile *ngIf="pilatService.parApproved && parCurrentApprobalStatus.par_cod == pilatService.parNotApproved.par_cod"><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Incidencias de la aprobación</mat-label><input matInput #input class="form-control" placeholder="Incidencias de la aprobación" [(ngModel)]="data.opportunityAosQuotes.approval_issue" name="approval_issue"  ><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
              <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Unidad Industrial (UV)</mat-label><input matInput #input class="form-control" placeholder="Unidad Industrial (UV)" [(ngModel)]="data.opportunityAosQuotes.aoQuoteAosQuotesCstm.unidad_industrial_c" name="quote_unidad_industrial_c" required ><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
              <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Manzano</mat-label><input matInput #input class="form-control" placeholder="Manzano" [(ngModel)]="data.opportunityAosQuotes.aoQuoteAosQuotesCstm.manzano_c" name="quote_manzano_c" required ><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
              <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Frente (m2)</mat-label><input matInput #input class="form-control" placeholder="Frente" [(ngModel)]="data.opportunityAosQuotes.aoQuoteAosQuotesCstm.frente_metros_c" name="quote_frente_metros_c" required ><span matPrefix></span><span matSuffix></span><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
              <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Fondo (m2)</mat-label><input matInput #input class="form-control" placeholder="Fondo" [(ngModel)]="data.opportunityAosQuotes.aoQuoteAosQuotesCstm.fondo_metros_c" name="quote_fondo_metros_c" required ><span matPrefix></span><span matSuffix></span><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
              <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Ubicación (Lote)</mat-label><input matInput #input class="form-control" placeholder="Ubicacion (Lote)" [(ngModel)]="data.opportunityAosQuotes.aoQuoteAosQuotesCstm.ubicacion_c" name="quote_ubicacion_c" required ><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
              <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Superficie (m2)</mat-label><input matInput #input class="form-control" placeholder="Superficie (m2)" [(ngModel)]="data.opportunityAosQuotes.aoQuoteAosQuotesCstm.lbl_superficie_c" name="quote_lbl_superficie_c" required ><span matPrefix></span><span matSuffix></span><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
              <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Link del Terreno</mat-label><input matInput #input class="form-control" placeholder="Link" [(ngModel)]="data.opportunityAosQuotes.aoQuoteAosQuotesCstm.link_terreno_c" name="link_terreno_c" type="text"><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>

          <!--</mat-list-item>-->
            <!--<mat-divider></mat-divider>-->
            <!--<mat-list-item>-->
              <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Tipo de Venta</mat-label><mat-select placeholder="Tipo de Venta" [(ngModel)]="data.opportunityAosQuotes.aoQuoteAosQuotesCstm.lbl_tipoventa_c" name="lbl_tipoventa_c" required>
                <mat-option *ngFor="let parVentaTipo of pilatService.parVentaTipos" [value]="parVentaTipo.par_cod" required >{{parVentaTipo.par_description}}</mat-option>
              </mat-select></mat-form-field></div></mat-grid-tile>
              <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Tipo de Pago</mat-label><mat-select placeholder="Tipo de Pago" [(ngModel)]="data.opportunityAosQuotes.aoQuoteAosQuotesCstm.tipo_pago_c" name="tipo_pago_c" (ngModelChange)="selectPago($event)" required>
                <mat-option *ngFor="let parTipoPago of pilatService.parPagoTipos" [value]="parTipoPago.par_cod" required >{{parTipoPago.par_description}}</mat-option>
              </mat-select></mat-form-field></div></mat-grid-tile>
              <mat-grid-tile *ngIf="pilatService.parPagoPlazo && parCurrentPago.par_cod == pilatService.parPagoPlazo.par_cod"><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Plazo en Años</mat-label><mat-select placeholder="Plazo en años" [(ngModel)]="data.opportunityAosQuotes.aoQuoteAosQuotesCstm.term_years_c" name="term_years_c">
                <mat-option *ngFor="let parTermYear of pilatService.parTermYears" [value]="parTermYear.par_cod" required >{{parTermYear.par_description}}</mat-option>
              </mat-select></mat-form-field></div></mat-grid-tile>
              <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Moneda</mat-label><mat-select placeholder="Moneda"  [(ngModel)]="data.opportunityAosQuotes.currency_id" name="currency_id" (ngModelChange)="selectCurrency($event)">
                <mat-option *ngFor="let parCurrency of pilatService.parCurrencies" [value]="parCurrency.par_cod" required >{{parCurrency.par_description}}</mat-option>
              </mat-select></mat-form-field></div></mat-grid-tile>
              <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Precio (m2)</mat-label><input matInput #input class="form-control" placeholder="Precio m2" [(ngModel)]="data.opportunityAosQuotes.aoQuoteAosQuotesCstm.precio_mcuadrado_c" name="precio_mcuadrado_c" required  type="number"><span matPrefix>{{parCurrentCurrency.par_cod ? parCurrentCurrency.par_cod : data.currency_id}}. </span><span matSuffix>.00</span><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
              <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Precio Total</mat-label><input matInput #input class="form-control" placeholder="Precio Total" [(ngModel)]="data.opportunityAosQuotes.total_amount" name="total_amount" required  type="number"><span matPrefix>{{parCurrentCurrency.par_cod ? parCurrentCurrency.par_cod : data.currency_id}}. </span><span matSuffix>.00</span><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
              <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Cuota Inicial</mat-label><input matInput #input class="form-control" placeholder="Cuota Inicial" [(ngModel)]="data.opportunityAosQuotes.aoQuoteAosQuotesCstm.lbl_cuotainicial_c" name="lbl_cuotainicial_c" required  type="number"><span matPrefix>{{parCurrentCurrency.par_cod ? parCurrentCurrency.par_cod : data.currency_id}}. </span><span matSuffix>.00</span><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
              <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Saldo</mat-label><input matInput #input class="form-control" placeholder="Saldo" [(ngModel)]="data.opportunityAosQuotes.aoQuoteAosQuotesCstm.saldo_c" name="saldo_c" required  type="number"><span matPrefix>{{parCurrentCurrency.par_cod ? parCurrentCurrency.par_cod : data.currency_id}}. </span><span matSuffix>.00</span><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
              <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Descuento</mat-label><input matInput #input class="form-control" placeholder="Descuento" [(ngModel)]="data.opportunityAosQuotes.discount_amount" name="discount_amount" required  type="number"><span matPrefix>{{parCurrentCurrency.par_cod ? parCurrentCurrency.par_cod : data.currency_id}}. </span><span matSuffix>.00</span><mat-error *ngIf="formControl.invalid">{{getErrorMessage()}}</mat-error></mat-form-field></div></mat-grid-tile>
              <mat-grid-tile><div class="form"><mat-form-field appearance="outline" class="example-full-width" color="accent"><mat-label>Estado de la Facturación</mat-label><mat-select placeholder="Estado de la Facturación" [(ngModel)]="data.opportunityAosQuotes.invoice_status" name="invoice_status" (ngModelChange)="selectInvoiceStatus($event)" required>
                <mat-option *ngFor="let parInvoiceStatus of pilatService.parInvoiceStatuses" [value]="parInvoiceStatus.par_cod" required >{{parInvoiceStatus.par_description}}</mat-option>
              </mat-select></mat-form-field></div></mat-grid-tile>
            <!--</mat-list-item>-->
          <!--</mat-list>-->

        </mat-grid-list>
      </mat-expansion-panel>

    </mat-accordion>
  </form>
</div>
<div mat-dialog-actions>
      <button mat-button [type]="submit" [disabled]="!formControl.valid" [mat-dialog-close]="1" (click)="confirmAdd()">Save</button>
      <button mat-button (click)="onNoClick()" tabindex="-1">Cancel</button>
    </div>
