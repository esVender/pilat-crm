<?php

/*** DOMAIN_CHECK ***/

if(!defined('sugarEntry') || !sugarEntry) die('Not A Valid Entry Point');require_once 'modules/Home/Dashlets/iFrameDashlet/iFrameDashlet.php';include_once "modules/AnalyticReporting/controllers/libs.php";class WidgetDashlet extends iFrameDashlet {protected $_seedName = 'AnalyticReporting';public $selectedReport;function displayOptions() {$id = substr($this->url, strpos($this->url, "&record=") + 8);$this->selectedReport = (int)$id;$ZZZZZZZZZZZZZZZZZZZZU2020 = new Sugar_Smarty();$ZZZZZZZZZZZZZZZZZZZZU2020->assign('title',translate('LBL_TITLE','Charts'));$ZZZZZZZZZZZZZZZZZZZZU2020->assign('save',$GLOBALS['app_strings']['LBL_SAVE_BUTTON_LABEL']);$ZZZZZZZZZZZZZZZZZZZZU2020->assign('clear',$GLOBALS['app_strings']['LBL_CLEAR_BUTTON_LABEL']);$ZZZZZZZZZZZZZZZZZZZZU2020->assign('id', $this->id);$ZZZZZZZZZZZZZZZZZZZZU2020->assign('searchFields', $this->currentSearchFields);$ZZZZZZZZZZZZZZZZZZZZU2020->assign('dashletTitle', $this->title);$ZZZZZZZZZZZZZZZZZZZZU2020->assign('heightLBL', translate('LBL_DASHLET_OPT_HEIGHT', 'Home'));$ZZZZZZZZZZZZZZZZZZZZU2020->assign('height', $this->height);$ZZZZZZZZZZZZZZZZZZZZU2020->assign('selectedReport', $this->selectedReport);$ZZZZZZZZZZZZZZZZZZZZU2020->assign('dashletType', 'predefined_chart');$ZZZZZZZZZZZZZZZZZZZZU2020->assign('module', $_REQUEST['module']);$ZZZZZZZZZZZZZZZZZZZZU2020->assign('showClearButton', $this->isConfigPanelClearShown);if($this->isAutoRefreshable()) {$ZZZZZZZZZZZZZZZZZZZZU2020->assign('isRefreshable', true);$ZZZZZZZZZZZZZZZZZZZZU2020->assign('autoRefresh', $GLOBALS['app_strings']['LBL_DASHLET_CONFIGURE_AUTOREFRESH']);$ZZZZZZZZZZZZZZZZZZZZU2020->assign('autoRefreshOptions', $this->getAutoRefreshOptions());$ZZZZZZZZZZZZZZZZZZZZU2020->assign('autoRefreshSelect', $this->autoRefresh);} $ZZZZZZZZZZZZZZZZZZZZZP1515 = new ZZZZZZZc2();$ZZZZZe4 = new ZZZZZf5();$ZZZZZZZZZZZZZZZZZZZZZQ1616 = $ZZZZZZZZZZZZZZZZZZZZZP1515->ZZZZZd3(PlatformConnector::ZZZZZZq16());$ZZZZZZZZZZZZZZZZZZZZZQ1616 = $ZZZZZe4->ZZZZZZb1($ZZZZZZZZZZZZZZZZZZZZZQ1616, 0);$ZZZZZZZZZZZZZZZZZZZZU2020->assign('reportNamesForTemplates', $ZZZZZZZZZZZZZZZZZZZZZQ1616);;return $ZZZZZZZZZZZZZZZZZZZZU2020->fetch('modules/AnalyticReporting/Dashlets/WidgetDashlet/WidgetDashletConfigure.tpl');} function saveOptions($ZZZZZZZZZZZZZZZZZZZZZR1717) {$ZZZg6 = array();$ZZZZZZZZZZZZZZZZZZZZZP1515 = new ZZZZZZZc2();$ZZZZZZZZZZZZZZZZZZZZZQ1616 = $ZZZZZZZZZZZZZZZZZZZZZP1515->ZZZZZd3(PlatformConnector::ZZZZZZq16());if($ZZZZZZZZZZZZZZZZZZZZZR1717['dashletTitle'] == "Generic Dashlet" || $this->title == $ZZZZZZZZZZZZZZZZZZZZZR1717['dashletTitle']){foreach ($ZZZZZZZZZZZZZZZZZZZZZQ1616 as $ZZZZZZZZZZZZZZZZZZZZZS1818) {if($ZZZZZZZZZZZZZZZZZZZZZS1818['id'] == $ZZZZZZZZZZZZZZZZZZZZZR1717['selectedReport']){$ZZZZZZZZZZZZZZZZZZZZZR1717['dashletTitle'] = $ZZZZZZZZZZZZZZZZZZZZZS1818['title'];break;}}} if (isset($ZZZZZZZZZZZZZZZZZZZZZR1717['height'])) {$ZZZg6['height'] = (int)$ZZZZZZZZZZZZZZZZZZZZZR1717['height'];} $ZZZg6['title'] = $ZZZZZZZZZZZZZZZZZZZZZR1717['dashletTitle'];$ZZZg6['autoRefresh'] = empty($ZZZZZZZZZZZZZZZZZZZZZR1717['autoRefresh']) ? '0' : $ZZZZZZZZZZZZZZZZZZZZZR1717['autoRefresh'];$ZZZg6['url'] = PlatformConnector::getUrl()."?module=AnalyticReporting&action=widget&record={$ZZZZZZZZZZZZZZZZZZZZZR1717['selectedReport']}";return $ZZZg6;} function display() {if(strpos($this->url, 'AnalyticReporting') === false){return '<div align="center"><h2>Select report from options</h2></div>';} return parent::display();} function displayScript(){}}