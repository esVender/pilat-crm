<?php

/*** DOMAIN_CHECK ***/

require_once "modules/AnalyticReporting/profiles/FunctionWrapper.php";FunctionWrapper::_ini_set('memory_limit','512M');class a0
{protected $b1 = 'YmUzYWM2sNGU24NbA363zA7IDSDFGDFGB5aVi35BDFGQ3YNO36ycDFGAATq4sYmSFVDFGDFGps7XDYEzGDDw96OnMW3kjCFJ7M+UV2kHe1WTTEcM09UMHHT';protected $c2 = '80dSbqylf4Cu5e5OYdAoAVkzpRDWAt7J1Vp27sYDU52ZBJprdRL1KE0il8KQXuKCK3sdA51P9w8U60wohX2gdmBu7uVhjxbS8g4y874Ht8L12W54Q6T4R4a';protected $d3 = 'ant9pbc3OK28Li36Mi4d3fsWJ4tQSN4a9Z2qa8W66qR7ctFbljsOc9J4wa2Bh6j8KB3vbEXB18i6gfbE0yHS0ZXQCceIlG7jwzDmN7YT06mVwcM9z0vy62T';protected $e4 = true;protected $f5 = 'blowfish';protected $g6;protected $h7 = 129600;protected $i8 = 'nSpkAHRiFfM2hE588eB';protected $j9 = 'NWCy0s0JpGubCVKlkkK';protected $k10 = 'G95ZP2uS782cFey9x5A';protected $l11 = 'BEGIN LICENSE KEY';protected $m12 = 'END LICENSE KEY';protected $n13 = 80;protected $o14 = "-";protected $p15 = '_DATA{';protected $q16 = '}DATA_';protected $r17 = array();protected $s18;protected $t19;protected $u20;protected $v21;protected $w22 = array();protected $x23 = array();protected $y24 = array();protected $z25 = 2;protected $A00 = 'M/d/Y H:i:s';protected $B11 = 0;protected $C22 = 0;function __construct($e4=true, $g6=true, $s18=true, $v21=false) {$this->D33($e4, $g6, $s18, $v21);if ($this->s18) {$this->u20 = $this->E44();}} function D33($e4=true, $g6=true, $s18=true, $v21=false) {$this->e4 = ($e4 && function_exists('mcrypt_generic'));$this->g6 = $g6;$this->v21 = $v21;$this->s18 = $s18;} function F55($G66) {$this->x23 = $G66;$this->y24 = $this->H77();$this->w22 = $this->I88();} function J99 ($K1010) {return $this->L1111($K1010);} function M1212 ($K1010, $N1313, $O1414, $P1515="80") {return $this->L1111($K1010, true, $N1313, $O1414, $P1515);} function L1111($K1010, $Q1616=false, $N1313="", $O1414="", $P1515="80") {if (strlen($K1010)>0) {$r17 = $this->R1717($K1010);if (is_array($r17)) {if ($r17['ID'] != md5($this->i8)) {$r17['RESULT'] = 'CORRUPT';} if ($this->g6) {if ($r17['DATE']['START'] > time()+$this->h7) {$r17['RESULT'] = 'TMINUS';} if ($r17['DATE']['END']-time() < 0 && $r17['DATE']['SPAN'] != 'NEVER') {$r17['RESULT'] = 'EXPIRED';} if(is_int($r17['DATE']['END'])) {$r17['DATE']['HUMAN']['START'] = date($this->A00, $r17['DATE']['START']);$r17['DATE']['HUMAN']['END'] = date($this->A00, $r17['DATE']['END']);}} if ($this->s18) {$u20 = $r17['SERVER']['MAC'] == $this->u20;$S1818 = count(array_diff($this->w22, $r17['SERVER']['PATH'])) <= $this->B11;$T1919 = $this->U2020($r17['SERVER']['DOMAIN'], $this->y24);$V2121 = count(array_diff($this->y24, $r17['SERVER']['IP'])) <= $this->C22;if (!$u20 || !$S1818 || !$T1919 || !$V2121) {$r17['RESULT'] = 'ILLEGAL';} $W2222 = $this->v21 && (in_array('127.0.0.1', $r17['SERVER']['IP']) || $r17['PATH']['SERVER_ADDR'] == '127.0.0.1' || $r17['PATH']['HTTP_HOST'] == '127.0.0.1');if (!$W2222) {$r17['RESULT'] = 'ILLEGAL_LOCAL';}} if (!isset($r17['RESULT'])) {if ($Q1616) {$X2323 = array();$X2323['LICENSE_DATA'] = $r17;$X2323['LICENSE_DATA']['KEY'] = md5($K1010);} else {$r17['RESULT'] = 'OK';}} return $r17;} else {return array('RESULT'=>'INVALID');}} return array('RESULT'=>'EMPTY');} function Y2424($dateFormat) {$this->A00 = $dateFormat;} function U2020($T1919, $y24=false) {if (!$y24) {$y24 = $this->H77();} $Z2525 = gethostbynamel($T1919);if (is_array($Z2525) && count($Z2525) > 0) {foreach ($Z2525 as $V2121) {if (in_array($V2121, $y24)) {return true;}}} return false;} function Za0($Zb1) {$Zc2 = strlen($Zb1);$Zd3 = ($this->n13-$Zc2)/2;$Ze4 = '';for ($Zf5=0;$Zf5<$Zd3;$Zf5++) {$Ze4 = $Ze4.$this->o14;} if ($Zd3/2 != round($Zd3/2)) {$Zb1 = substr($Ze4, 0, strlen($Ze4)-1).$Zb1;} else {$Zb1 = $Ze4.$Zb1;} $Zb1 = $Zb1.$Ze4;return $Zb1;} function Zg6($Zh7) {switch($Zh7) {case 'KEY' : return $this->b1;case 'REQUESTKEY' : return $this->c2;case 'HOMEKEY' : return $this->d3;default :}} function Zi8($Zh7) {switch($Zh7) {case 'KEY' : return $this->l11;case 'REQUESTKEY' : return $this->p15;case 'HOMEKEY' : return '';}} function Zj9($Zh7) {switch($Zh7) {case 'KEY' : return $this->m12;case 'REQUESTKEY' : return $this->q16;case 'HOMEKEY' : return '';}} function Zk10($Zl11=10, $Zm12='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz01234567890123456789') {$Zb1 = '';$Zn13 = strlen($Zm12);list($Zo14, $Zp15) = explode(' ', microtime());$Zq16 = (float) $Zp15 + ((float) $Zo14 * 100000);mt_srand($Zq16);for ($Zf5 = 0;$Zl11 > $Zf5;$Zf5++) {$Zb1 .= $Zm12{mt_rand(0, $Zn13 - 1)};} return $Zb1;} function Zr17($Zs18, $Zh7='KEY') {$Zt19 = $this->Zk10(3);$Zu20 = $this->Zg6($Zh7);$Zu20 = $Zt19 . $Zu20;if ($this->e4) {$Zv21 = mcrypt_module_open($this->f5, '', 'ecb', '');$Zw22 = mcrypt_create_iv(mcrypt_enc_get_iv_size($Zv21), MCRYPT_RAND);$Zu20 = substr($Zu20, 0, mcrypt_enc_get_key_size($Zv21));mcrypt_generic_init($Zv21, $Zu20, $Zw22);$Zx23 = mcrypt_generic($Zv21, serialize($Zs18));mcrypt_generic_deinit($Zv21);mcrypt_module_close($Zv21);} else {$Zx23 = '';$Zb1 = serialize($Zs18);for ($Zf5=1;$Zf5<=strlen($Zb1);$Zf5++) {$Zy24 = substr($Zb1, $Zf5-1, 1);$Zz25 = substr($Zu20, ($Zf5 % strlen($Zu20))-1, 1);$Zy24 = chr(ord($Zy24)+ord($Zz25));$Zx23 .= $Zy24;}} return $Zt19.base64_encode(base64_encode(trim($Zx23)));} function ZA00($Zb1, $Zh7='KEY') {$Zt19 = substr($Zb1, 0, 3);$Zb1 = base64_decode(base64_decode(substr($Zb1, 3)));$Zu20 = $Zt19 . $this->Zg6($Zh7);if ($this->e4) {$Zv21 = mcrypt_module_open($this->f5, '', 'ecb', '');$Zw22 = mcrypt_create_iv(mcrypt_enc_get_iv_size($Zv21), MCRYPT_RAND);$Zu20 = substr($Zu20, 0, mcrypt_enc_get_key_size($Zv21));mcrypt_generic_init($Zv21, $Zu20, $Zw22);$ZB11 = @mdecrypt_generic($Zv21, $Zb1);mcrypt_generic_deinit($Zv21);mcrypt_module_close($Zv21);} else {$ZB11 = '';for ($Zf5=1;$Zf5<=strlen($Zb1);$Zf5++) {$Zy24 = substr($Zb1, $Zf5-1, 1);$Zz25 = substr($Zu20, ($Zf5 % strlen($Zu20))-1, 1);$Zy24 = chr(ord($Zy24)-ord($Zz25));$ZB11 .= $Zy24;}} return @unserialize($ZB11);} function ZC22($Zs18, $Zh7='KEY') {$ZD33 = $this->Za0($this->Zi8($Zh7));$ZE44 = $this->Za0($this->Zj9($Zh7));$Zb1 = $this->Zr17($Zs18, $Zh7);return $ZD33 . PHP_EOL . wordwrap($Zb1, $this->n13, PHP_EOL, 1) . PHP_EOL . $ZE44;} function R1717($ZF55, $Zh7='KEY') {$ZD33 = $this->Za0($this->Zi8($Zh7));$ZE44 = $this->Za0($this->Zj9($Zh7));$Zb1 = trim(str_replace(array($ZD33, $ZE44, "\r", "\n", "\t"), '', $ZF55));return $this->ZA00($Zb1, $Zh7);} function ZG66($ZH77, $ZI88) {$ZH77 = strtolower($ZH77);switch($ZI88) {case 'freebsd' : case 'netbsd' : case 'solaris' : case 'sunos' : case 'darwin' : switch($ZH77) {case 'conf' : $ZJ99 = '/sbin/ifconfig';break;case 'mac' : $ZJ99 = 'ether';break;case 'ip' : $ZJ99 = 'inet ';break;} break;case 'linux' : switch($ZH77) {case 'conf' : $ZJ99 = '/sbin/ifconfig';break;case 'mac' : $ZJ99 = 'HWaddr';break;case 'ip' : $ZJ99 = 'inet addr:';break;} break;} return $ZJ99;} function H77() {$y24 = array();if (isset($this->x23['SERVER_NAME'])) {$V2121 = gethostbyname($this->x23['SERVER_NAME']);if (!isset($y24[$V2121])) {$y24[$V2121] = $V2121;}} if (isset($this->x23['SERVER_ADDR'])) {$name = gethostbyaddr($this->x23['SERVER_ADDR']);$V2121 = gethostbyname($name);if (!isset($y24[$V2121])) {$y24[$V2121] = $V2121;} if (isset($ZK1010) && $ZK1010 != $this->x23['SERVER_ADDR']) {if (!isset($y24[$this->x23['SERVER_ADDR']])) {$y24[$this->x23['SERVER_ADDR']] = $this->x23['SERVER_ADDR'];}}} if (count($y24) > 0) {return $y24;} return 'IP_404';} function E44() {return 'MAC_404';} function I88() {if (empty($this->x23)) {$this->F55($ZL1111);} $ZM1212 = array();if (isset($this->x23['SERVER_ADDR']) && (!strrpos($this->x23['SERVER_ADDR'], '127.0.0.1') || $this->v21)) {$ZM1212['SERVER_ADDR'] = $this->x23['SERVER_ADDR'];} if (isset($this->x23['HTTP_HOST']) && (!strrpos($this->x23['HTTP_HOST'], '127.0.0.1') || $this->v21)) {$ZM1212['HTTP_HOST'] = $this->x23['HTTP_HOST'];} if (isset($this->x23['SERVER_NAME'])) {$ZM1212['SERVER_NAME'] = $this->x23['SERVER_NAME'];} if (isset($this->x23['PATH_TRANSLATED'])) {$ZM1212['PATH_TRANSLATED'] = substr($this->x23['PATH_TRANSLATED'], 0, strrpos($this->x23['PATH_TRANSLATED'], '/'));} else if (isset($this->x23['SCRIPT_FILENAME'])) {$ZM1212['SCRIPT_FILENAME'] = substr($this->x23['SCRIPT_FILENAME'], 0, strrpos($this->x23['SCRIPT_FILENAME'], '/'));} if (isset($ZL1111['SCRIPT_URI'])) {$ZM1212['SCRIPT_URI'] = substr($this->x23['SCRIPT_URI'], 0, strrpos($this->x23['SCRIPT_URI'], '/'));} if (count($ZM1212) < $this->z25) {return 'SERVER_FAILED';} return $ZM1212;} function ZN1313($T1919='', $ZO1414=0, $ZP1515=31449600, $ZQ1616=array()) {if ($this->w22 !== false || !$this->s18) {$r17['ID'] = md5($this->i8);if ($this->s18) {$r17['SERVER']['DOMAIN'] = $T1919;$r17['SERVER']['MAC'] = $this->u20;$r17['SERVER']['PATH'] = $this->w22;$r17['SERVER']['IP'] = $this->y24;} if ($this->g6 && !is_array($ZO1414)) {$ZR1717 = time();$ZO1414 = ($ZR1717 < $ZO1414) ? $ZO1414 : $ZR1717+$ZO1414;$r17['DATE']['START'] = $ZO1414;$r17['DATE']['SPAN'] = $ZP1515;if ($ZP1515 == 'NEVER') {$r17['DATE']['END'] = 'NEVER';} else {$r17['DATE']['END'] = $ZO1414+$ZP1515;}} if (is_array($ZO1414)) {$ZQ1616 = $ZO1414;} $ZQ1616['_PHP_OS'] = PHP_OS;$ZQ1616['_PHP_VERSION'] = PHP_VERSION;$r17['DATA'] = $ZQ1616;$Zu20 = $this->ZC22($r17);return $Zu20;} return 'SERVER_FAIL';}} ;class ZS1818 extends a0 {public $ZT1919 = '';public $ZU2020;function __construct(ZV2121 $ZU2020, $e4=true, $g6=true, $s18=true, $v21=false){$this->ZU2020 = $ZU2020;parent::__construct($e4, $g6, $s18, $v21);} function ZW2222($Zu20) {if(!$this->J99($Zu20) && (isset($_REQUEST['action']) && !in_array($_REQUEST['action'], array("settings","index")))) {echo '<div style="border:1px solid red;font:12px/20px arial,sans-serif;padding:20px;margin:20px auto;">'.$this->ZT1919.'</div>';$this->report();exit();} if (!$this->J99($Zu20)) {global $ZX2323;$ZX2323 = $this->ZT1919;}} function J99($K1010) {$r17 = parent::J99($K1010);if($r17['RESULT'] == 'OK') {$ZY2424 = $this->ZZ2525($r17['DATA']['_D']);if(!$ZY2424) {$this->ZT1919 = base64_decode('WW91IGFyZSB1c2luZyByZXBvcnRpbmcgbW9kdWxlIGNvcHkgb24gdW5saWNlbnNlZCBkb21haW4hIFBsZWFzZSBjb250YWN0IElUIFNhcGllbnMsIEx0ZC4gc3VwcG9ydCBieSBlbWFpbCBpbmZvQGl0c2FwaWVucy5ldS4=');return false;} $ZY2424 = $this->ZZa0($r17['DATA']['_V']);if(!$ZY2424) {$this->ZT1919 = base64_decode('WW91IGFyZSB1c2luZyByZXBvcnRpbmcgbW9kdWxlIGxpY2Vuc2UgZm9yIGRpZmZlcmVudCB2ZXJzaW9uIG9mIHN5c3RlbSEgUGxlYXNlIGNvbnRhY3QgSVQgU2FwaWVucywgTHRkLiBzdXBwb3J0IGJ5IGVtYWlsIGluZm9AaXRzYXBpZW5zLmV1Lg==');return false;} $ZY2424 = $this->ZZb1($r17['DATA']['_U']);if(!$ZY2424) {$this->ZT1919 = base64_decode('WW91IGFyZSB1c2luZyByZXBvcnRpbmcgbW9kdWxlIGNvcHkgaW4gc3lzdGVtIHdpdGggbW9yZSB1c2VycyB0aGFuIGxpY2Vuc2VkISBQbGVhc2UgY29udGFjdCBJVCBTYXBpZW5zLCBMdGQuIHN1cHBvcnQgYnkgZW1haWwgaW5mb0BpdHNhcGllbnMuZXUu');return false;} return true;} $this->ZT1919 = base64_decode('WW91IGFyZSB1c2luZyB1bmxpY2Vuc2VkIG9yIGV4cGlyZWQgY29weSBvZiByZXBvcnRpbmcgbW9kdWxlISBQbGVhc2UgY29udGFjdCBJVCBTYXBpZW5zLCBMdGQuIHN1cHBvcnQgYnkgZW1haWwgaW5mb0BpdHNhcGllbnMuZXUu');return false;} function ZZ2525($ZZc2, $y24=false){$ZZd3 = $this->x23[base64_decode('U0VSVkVSX05BTUU=')];$ZZd3 = preg_replace("#^www\.(.+\.)#i", "$1", $ZZd3);$ZZe4 = explode(",", $ZZc2);$ZZf5 = array($ZZd3, base64_decode('Rk9SQUxMRE9NQUlOUw=='));foreach($ZZe4 as $T1919) {if(in_array($T1919, $ZZf5)) {return true;}} return false;} function ZZa0($ZZg6) {$ZZh7 = array($this->ZU2020->getValue(base64_decode('dmVyc2lvbg==')), base64_decode('Rk9SQUxMVkVSU0lPTlM='));if(in_array($ZZg6, $ZZh7)) {return true;} return false;} function ZZb1($ZZi8) {$ZZj9 = $this->ZZk10();if($ZZj9 && ($ZZi8 >= $ZZj9)) {return true;} return false;} function ZZk10() {$ZZl11 = $this->ZZm12();if($ZZl11 == 'SUGARCRM') {global $db;$ZY2424 = $db->query("SELECT COUNT(*) AS count FROM `users` WHERE `status` = 'Active'");$ZZn13 = $db->fetchByAssoc($ZY2424);return $ZZn13['count'];} if($ZZl11 == 'VTIGER') {global $adb;$ZY2424 = $adb->query("SELECT COUNT(*) AS count FROM `vtiger_users` WHERE `status` = 'Active'");$ZZn13 = $adb->query_result($ZY2424, 0, 'count');return $ZZn13;} return false;} function ZZm12() {global $sugar_config;global $vtiger_current_version;if(!empty($sugar_config)) {return 'SUGARCRM';} if(!empty($vtiger_current_version)) {return 'VTIGER';}} function report() {$ZZo14 = curl_init(base64_decode('aHR0cDovL2xvZy5kZXYuaXRzYXBpZW5zLmV1'));curl_setopt($ZZo14, CURLOPT_CUSTOMREQUEST, "POST");curl_setopt($ZZo14, CURLOPT_POSTFIELDS, stripslashes(json_encode($this->x23)));curl_setopt($ZZo14, CURLOPT_RETURNTRANSFER, true);curl_exec($ZZo14);}}
;class ZV2121
{protected $db;function __construct(ZZp15 $db) {$this->db = $db;} function getValue($Zu20) {$Zu20 = $this->db->quote($Zu20);$ZZq16 = "SELECT `value` FROM `advancedreports_config` WHERE `key` = '{$Zu20}' LIMIT 1";$ZY2424 = $this->db->query($ZZq16);$ZZr17 = $this->db->fetchRow($ZY2424);if(isset($ZZr17['value'])) {return $ZZr17['value'];} return false;} function ZZs18($Zu20, $value) {$Zu20 = $this->db->quote($Zu20);$value = $this->db->quote($value);$ZZq16 = "INSERT INTO `advancedreports_config` (`key`, `value`) VALUES ('{$Zu20}', '{$value}') ON DUPLICATE KEY UPDATE `key` = '{$Zu20}', `value` = '{$value}' ";return $this->db->query($ZZq16);}}
;$ZZt19 = false;if(file_exists('modules/AnalyticReporting/outfitter.php') && require('modules/AnalyticReporting/outfitter.php')){$ZZt19 = true;}
if($ZZt19){require_once('modules/AnalyticReporting/license/OutfittersLicense.php');$ZZu20 = AnalyticReportingOutfittersLicense::isValid('AnalyticReporting');if($ZZu20 !== true && isset($_REQUEST['action']) && !in_array($_REQUEST['action'], array("index", "license"))) {if($_REQUEST['action']!='widget'){header("Location: index.php?module=AnalyticReporting&action=license&inactive=".urlencode($ZZu20));} else {echo '<h2><p class="error">AnalyticReporting is inactive</p></h2><p class="error">'.$ZZu20.'</p>';exit();}}}else{$adb = DBManagerFactory::getInstance();$db = new ZZp15($adb);$ZZv21 = new ZV2121($db);$ZZw22 = new ZS1818($ZZv21, false, true, false, true);$ZZw22->F55($_SERVER);$ZZw22->ZW2222($ZZv21->getValue('key'));} class ZZp15 {protected $db;public $dbPrefix = "";protected $ZZx23 = false;function __construct($db){$this->db = $db;} function ZZy24($ZZq16) {$ZZz25 = preg_split('/((?<!\\\)[&?!])/', $ZZq16, -1, PREG_SPLIT_DELIM_CAPTURE);$ZZn13 = 0;$ZZA00 = '';foreach ($ZZz25 as $Zu20 => $ZZB11) {switch ($ZZB11) {case '?' : case '!' : case '&' : $ZZn13++;$ZZA00 .= '?';break;default : $ZZz25[$Zu20] = preg_replace('/\\\([&?!])/', "\\1", $ZZB11);$ZZA00 .= $ZZz25[$Zu20];break;}} $this->preparedTokens[] = array('tokens' => $ZZz25, 'tokenCount' => $ZZn13, 'sqlString' => $ZZA00);end($this->preparedTokens);return key($this->preparedTokens);} function ZZC22($ZZD33, $r17 = array(), $ZZx23 = false) {if(!empty($this->preparedTokens[$ZZD33])){if(!is_array($r17)){$r17 = array($r17);} $ZZE44 = $this->preparedTokens[$ZZD33];if(count($r17) != $ZZE44['tokenCount']){return false;} $query = '';$ZZF55 = 0;$ZZz25 = $ZZE44['tokens'];foreach ($ZZz25 as $ZZB11) {switch ($ZZB11) {case '?': $query .= "'".$r17[$ZZF55++]."'";break;case '&': $ZZG66 = $r17[$ZZF55++];$query .= file_get_contents($ZZG66);break;case '!': $query .= $r17[$ZZF55++];break;default: $query .= $ZZB11;break;}} $ZY2424 = $this->db->query($query);if($this->ZZx23 || $ZZx23) {if($this->db->lastDbError()) {echo "<pre style='border:1px solid red'>";var_dump($this->db->lastDbError());var_dump(debug_backtrace(DEBUG_BACKTRACE_IGNORE_ARGS));echo "</pre>";}} return $ZY2424;}else{return false;}} function ZZH77($ZZq16, $r17 = array(), $ZZx23 = false) {$ZZD33 = $this->ZZy24($ZZq16);return $this->ZZC22($ZZD33, $r17, $ZZx23);} function ZZI88($ZY2424, $Zu20) {$ZZr17 = $this->fetchRow($ZY2424);if(isset($ZZr17[$Zu20])) {return $ZZr17[$Zu20];} return false;} function setDieOnError($value) {$this->db->setDieOnError($value);} function quote($ZZJ99) {return $this->db->quote($ZZJ99);} function query($ZZq16) {return $this->db->query($ZZq16);} function fetchRow($ZY2424) {if(method_exists($this->db, 'fetchRow')) {return $this->db->fetchRow($ZY2424);} else {return $this->db->fetchByAssoc($ZY2424, -1, false);}} function ZZK1010($ZZL1111, $type = 'single') {$ZZM1212 = array();$quote = '"';if($type == 'single') {$quote = "'";} foreach($ZZL1111 as $value) {$ZZM1212[] = $quote . $value . $quote;} return $ZZM1212;} function run_query_allrecords($query) {$ZY2424 = $this->db->query($query);return $this->GetAll($ZY2424);} function GetAll($ZY2424) {$r17 = array();while($ZZr17 = $this->fetchRow($ZY2424)) {$r17[] = $ZZr17;} return $r17;} function ZZN1313($fieldName, $module){$ZZO1414 = array();$field = $this->ZZP1515($fieldName, $module);if(isset($field["options"])) {if(isset($GLOBALS['app_list_strings'][$field["options"]])) {$ZZO1414 = $GLOBALS['app_list_strings'][$field["options"]];}} return $ZZO1414;} function ZZQ1616($ZZR1717){$ZZS1818 = null;$ZZq16 = 'SELECT currency_code FROM vtiger_currency_info WHERE id=?';$ZY2424 = $this->ZZH77($ZZq16,array($ZZR1717));$ZZT1919 = $this->db->num_rows($ZY2424);if($ZZT1919 == 1){$ZZS1818 = $this->db->query_result($ZY2424, 0, 'currency_code');} return $ZZS1818;} function ZZU2020($module,$name){$ZZS1818 = $name;$ZZV2121 = $this->ZZW2222($module);foreach($ZZV2121 as $field) {if($field['fieldname'] == $name) {return $field;}} return $ZZS1818;} function ZZP1515($fieldName, $module) {$ZZV2121 = $this->ZZW2222($module);foreach($ZZV2121 as $field) {if($field["fieldname"] == $fieldName) {return $field;}} return false;} function ZZX2323($ZZY2424, $field) {$ZZZ2525 = array('tablename' => $ZZY2424, 'columnname' => $field['name'], 'fieldname' => $field['name'], 'fieldlabel' => $field['vname'], 'uitype' => $field['type'], 'typeofdata' => 'V~O', 'block' => '1',);if(isset($field['dbType'])) {$ZZZ2525['dbType'] = $field['dbType'];} if(isset($field['options'])) {$ZZZ2525['options'] = $field['options'];} if($field['type'] == 'link') {return false;} if(isset($field['source'])) {if(in_array($field['source'], array('non-db'))) {return false;} if($field['source'] == 'custom_fields') {$ZZZ2525['tablename'] = $ZZZ2525['tablename'] . '_cstm';}} if($field['vname'] == '' && $field['type'] != 'id') {return false;}elseif($field['vname'] == '' && $field['type'] == 'id'){$ZZZ2525['fieldlabel'] = $field['name'];} if($field['type'] == 'relate') {if(!isset($field['module'])) {return false;} $ZZZ2525['related_module'] = $field['module'];$ZZZ2525['id_name'] = $field['id_name'];if(isset($field['table'])) {$ZZZ2525['table'] = $field['table'];} if(isset($field['rname'])) {$ZZZ2525['rname'] = $field['rname'];}} if($field['type'] == 'assigned_user_name') {$ZZZ2525['related_module'] = 'Users';$ZZZ2525['table'] = 'users';$ZZZ2525['id_name'] = 'id';if(isset($field['rname'])) {$ZZZ2525['rname'] = $field['rname'];}} return $ZZZ2525;} function ZZW2222($module) {$ZZZ2525 = array();if($module == 'InventoryToService') {} else {$ZZZa0 = PlatformConnector::ZZZb1($module);if(!$ZZZa0) {return false;} $ZZY2424 = $ZZZa0->getTableName();$ZZZc2 = $ZZZa0->getFieldDefinitions();foreach($ZZZc2 as $field) {if(!isset($field['vname'])) {continue;} $ZZZd3 = $this->ZZX2323($ZZY2424, $field);if($ZZZd3) {$ZZZ2525[] = $ZZZd3;}}} $ZZZe4 = ZZZf5::getInstance();$ZZZg6 = $ZZZe4->ZZZh7();if(isset($ZZZg6->enableCustomTables) && $ZZZg6->enableCustomTables) {ZZZi8::ZZZj9(ZZZk10::load('hooks', 'addCustomTable'));$ZZZ2525 = ZZZi8::ZZZl11($module, $ZZZ2525);} if($module == 'oqc_Service') {$ZZZ2525[] = array('tablename' => "oqc_service", 'columnname' => "quantity`*`#alias#`.`price", 'fieldname' => "netprice", 'fieldlabel' => "LBL_NET_PRICE", 'uitype' => 'float', 'typeofdata' => 'N~M',);} return $ZZZ2525;} function ZZZm12($ZZJ99) {global $moduleList;$moduleName = false;$ZZZn13 = false;list($ZZZo14, $ZZZp15) = explode("_", $ZZJ99, 2);foreach($moduleList as $ZZZq16) {$ZZZr17 = strlen($ZZZq16);$ZZZs18 = substr($ZZZp15, 0, $ZZZr17);if ($ZZZs18 == $ZZZq16) {$moduleName = $ZZZq16;$ZZZn13 = substr($ZZZp15, $ZZZr17 + 1);break;}} $r17 = array(0 => $ZZZo14, 1 => $moduleName, 2 => $ZZZn13,);return $r17;} function ZZZt19($field) {if(isset($field['id_name'])) {$field['columnname'] = $field['id_name'];} $ZZZu20 = false;if(isset($field['table'])) {$ZZZu20 = $field['table'];} $ZZZv21 = array('relation' => array('tablename' => $ZZZu20, 'entityidfield' => 'id',), 'field' => array($field), 'names' => array($field['columnname']),);return $ZZZv21;} function ZZZw22($module, $field = null){static $ZZZx23 = array();if($field && is_array($field)) {if(isset($field['rname']) || $field['uitype'] == 'name') {return $this->ZZZt19($field);}} if(!isset($ZZZx23[$module])){$ZZZy24 = $this->ZZW2222($module);foreach($ZZZy24 as $field) {if(isset($field['rname']) || $field['uitype'] == 'name') {$ZZS1818 = $this->ZZZt19($field);}} $ZZZx23[$module] = $ZZS1818;} return $ZZZx23[$module];} function ZZZz25($module){$ZZZA00 = array();$ZZZB11 = array('id' => '1', 'label' => '---', 'fields' => $this->ZZW2222($module),);$ZZZA00[] = $ZZZB11;return $ZZZA00;} function ZZZC22($query){$ZZS1818 = $this->run_query_allrecords($query);return $ZZS1818;} function ZZZD33($query){$ZZS1818 = $this->db->query($query);return $ZZS1818;} function ZZZE44($query,$ZZZF55,$ZZZG66 = null, $ZZx23 = false){$ZZZH77 = $this->ZZH77($query, $ZZZF55, $ZZx23);$ZZS1818 = $this->GetAll($ZZZH77);return $ZZS1818;} function ZZZI88($query,$ZZZF55, $ZZx23 = false){$ZZZH77 = $this->ZZH77($query,$ZZZF55, $ZZx23);return ($ZZZH77 !== false);} function ZZZJ99($ZZZK1010, $ZZZL1111, $ZZZM1212, $ZZZN1313) {if($ZZZL1111 == "PUB"){$ZZZL1111 = 1;if($ZZZM1212=="EDIT"){$ZZZM1212 = 1;}elseif($ZZZM1212=="DELETE"){$ZZZM1212 = 2;}else{$ZZZM1212 = 0;}}else{$ZZZL1111 = 0;$ZZZM1212 = 0;} $ZZq16 = "UPDATE `advancedreports` SET shared=?, sharedlevel=?, owner=? WHERE id = ?";$ZZZF55 = array($ZZZL1111, $ZZZM1212, $ZZZN1313, $ZZZK1010);$ZY2424 = $this->ZZH77($ZZq16,$ZZZF55);return $ZY2424;} function saveReport($id, $ZZZc2, $filters, $ZZZO1414, $ZZZP1515, $ZZZQ1616, $ZZZg6, $ZZZR1717, $ZZZS1818,$ZZZL1111,$ZZZM1212,$ZZZN1313,$ZZZT1919,$ZZZU2020 = null){if($ZZZL1111 == "PUB"){$ZZZL1111 = 1;if($ZZZM1212=="EDIT"){$ZZZM1212 = 1;}elseif($ZZZM1212=="DELETE"){$ZZZM1212 = 2;}else{$ZZZM1212 = 0;}}else{$ZZZL1111 = 0;$ZZZM1212 = 0;} $ZZq16 = "UPDATE `advancedreports` SET fields=?, filters = ?, grouping = ?, aggregates = ?, totalAggregates = ?, options = ?, labels = ?, chart = ?, shared=?, sharedlevel=?, owner=?, calcFields=?";$ZZZF55 = array($ZZZc2, $filters, $ZZZO1414, $ZZZP1515, $ZZZQ1616, $ZZZg6, $ZZZR1717, $ZZZS1818, $ZZZL1111, $ZZZM1212,$ZZZN1313,$ZZZT1919);if($ZZZU2020!=null){$ZZq16.= ", combinedfields=?";$ZZZF55[] = $ZZZU2020;} $ZZq16.= " WHERE id = ?";$ZZZF55[] = $id;$ZY2424 = $this->ZZH77($ZZq16,$ZZZF55,true);} function ZZZV2121($module, $ZZZW2222, $ZZZX2323, $ZZZc2, $filters, $ZZZO1414, $ZZZP1515, $ZZZQ1616, $ZZZg6, $ZZZR1717, $title,$description,$ZZZS1818,$ZZZL1111,$ZZZM1212,$ZZZN1313,$ZZZT1919,$isCombined = 0, $ZZZY2424 = null){if($ZZZL1111 == "PUB"){$ZZZL1111 = 1;if($ZZZM1212=="EDIT"){$ZZZM1212 = 1;}elseif($ZZZM1212=="DELETE"){$ZZZM1212 = 2;}else{$ZZZM1212 = 0;}}else{$ZZZL1111 = 0;$ZZZM1212 = 0;} $ZZS1818 = $this->ZZH77("SELECT IFNULL(MAX(`sequence`) + 1, 0) AS `sequence` FROM `advancedreports` WHERE `category_id` = ? ", array($ZZZW2222));$ZZZZ2525 = $this->ZZI88($ZZS1818, 'sequence');$this->setDieOnError(true);$this->ZZH77("INSERT INTO `advancedreports`(`module`, `category_id`, `sequence`, `related_data`, `fields`, `filters`, `grouping`, `aggregates`, `totalAggregates`, `title`, `description`, `options`, `labels`, `chart`,`shared`,`sharedlevel`,`owner`,`iscombined`,`combinedfields`,`calcFields`) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)", array($module, $ZZZW2222, $ZZZZ2525, $ZZZX2323,$ZZZc2, $filters, $ZZZO1414, $ZZZP1515, $ZZZQ1616, $title, $description, $ZZZg6, $ZZZR1717, $ZZZS1818,$ZZZL1111,$ZZZM1212,$ZZZN1313,$isCombined,$ZZZY2424,$ZZZT1919));$ZZS1818 = $this->run_query_allrecords("SELECT last_insert_id() AS `id`");return $ZZS1818[0]['id'];} function loadReport($id){$ZZS1818 = null;$ZZS1818 = $this->run_query_allrecords("SELECT * FROM advancedreports WHERE id = ". (int)$id);if($ZZS1818){$ZZS1818 = $ZZS1818[0];$ZZS1818["related_data"] = json_decode($ZZS1818["related_data"],true);for($Zf5 = 0;$Zf5<count($ZZS1818['related_data']);$Zf5++){for($ZZZZa0 = 0;$ZZZZa0 <= 11;$ZZZZa0++) {if(!isset($ZZS1818["related_data"][$Zf5][$ZZZZa0])) {$ZZS1818["related_data"][$Zf5][$ZZZZa0] = false;}}}} return $ZZS1818;} function ZZZZb1($ZZZZc2="*", $ZZZZd3="", $limit=1){$query = "SELECT $ZZZZc2 FROM advancedreports";if(!empty($ZZZZd3)){$query .= " WHERE $ZZZZd3";} if((int)$limit>0){$query.= " LIMIT $limit";} $query.=";";$report = $this->run_query_allrecords($query);return $report;} function listReports($ZZZZe4,$ZZZZf5,$ZZZZg6,$ZZZW2222=null,$ZZZZh7=false){$ZZS1818 = null;$ZZZZi8 = " AND ";$ZZZZj9 = " `r`.`visible` = 1 ";if($ZZZZh7) {$ZZZZi8 = "";$ZZZZj9 = "";} $ZZZW2222 = (int) $ZZZW2222;if($ZZZZe4){$query = "SELECT r.*, 2 as `can_edit`, 1 as `can_delete` FROM advancedreports r WHERE `r`.`category_id` = ".$ZZZW2222." ".$ZZZZi8.$ZZZZj9." ORDER BY r.`sequence` ASC";}else{if(empty($ZZZZg6) || (count($ZZZZg6) == 1 && $ZZZZg6[0]=="")){$ZZZZg6 = array(-1);} $query = "SELECT r.* , `a`.`can_edit` as `can_edit`, `a`.`can_delete` as `can_delete` FROM advancedreports r LEFT JOIN (SELECT r2.`id` as id, COUNT(*) as 'cnt', IFNULL(IFNULL(SUM(`g`.`level`),0) +IFNULL(SUM(`u`.`level`),0) +IF(`r2`.`owner`='$ZZZZf5' OR `r2`.`sharedlevel`=1 ,1,0), 0) as `can_edit`, sum(IF(`u`.`level`=2,1,0)+ IF(`g`.`level`=2,1,0)+ IF(`r2`.`owner`='$ZZZZf5' OR `r2`.`sharedlevel`=2,1,0)) as `can_delete` FROM `advancedreports` `r2` LEFT JOIN `advancedreports_sharedusers` `u` on u.report_id = r2.id LEFT JOIN `advancedreports_sharedgroups` `g` on g.report_id = r2.id WHERE (r2.owner = '$ZZZZf5' OR u.user_id = '$ZZZZf5' OR g.group_id IN (". implode(",",$this->ZZK1010($ZZZZg6)).")) OR r2.shared = 1 GROUP BY r2.id) `a` ON `a`.`id` = `r`.`id` WHERE `a`.`cnt`>0 AND `r`.`category_id` = ".$ZZZW2222." ".$ZZZZi8.$ZZZZj9." ORDER BY r.`sequence` ASC";} $ZZS1818 = $this->run_query_allrecords($query);return $ZZS1818;} function ZZZZk10($id,$title,$description){$this->ZZH77("UPDATE `advancedreports` SET `title`=?, `description`=? WHERE `id` = ?", array($title, $description, $id));} function deleteReport($id){$this->ZZH77("DELETE FROM `advancedreports` WHERE `id` = ?", array($id));} function ZZZZl11($ZZq16){$ZZS1818 = $this->run_query_allrecords($ZZq16);return $ZZS1818;} function ZZZZm12($ZZZZn13, $ZZZZo14, $ZZZZp15){$ZZZZn13 = "CREATE OR REPLACE VIEW {$ZZZZp15} AS {$ZZZZn13}";$ZY2424 = $this->ZZH77($ZZZZn13, $ZZZZo14);return $ZY2424;} function ZZZZq16(){return $this->ZZZZl11("SELECT `id`, TRIM(CONCAT(IFNULL(`first_name`, ''), ' ', IFNULL(`last_name`, ''))) as `name` FROM `users` WHERE `status`='Active'");} function ZZZZr17($ZZZK1010){return $this->ZZZZl11("SELECT `user_id` as `id`, `level` FROM `advancedreports_sharedusers` WHERE `report_id`=$ZZZK1010");} function ZZZZs18($ZZZK1010){return $this->ZZZZl11("SELECT `user` as `user` FROM `advancedreports_schedule_u` WHERE `id`=$ZZZK1010");} function ZZZZt19($ZZZK1010){return $this->ZZZZl11("SELECT `group` as `group` FROM `advancedreports_schedule_g` WHERE `id`=$ZZZK1010");} function ZZZZu20($ZZZK1010){return $this->ZZZZl11("SELECT `role` as `role` FROM `advancedreports_schedule_r` WHERE `id`=$ZZZK1010");} function ZZZZv21($ZZZK1010){$ZY2424 = $this->ZZZZl11("SELECT `emails` FROM `advancedreports_schedule` WHERE `id`=$ZZZK1010");$ZZS1818 = "{}";if(isset($ZY2424[0]['emails'])){$ZZS1818 = $ZY2424[0]['emails'];} return json_decode($ZZS1818,true);} function ZZZZw22($ZZZZx23,$ZZZZy24,$ZZZZz25){$ZZS1818 = null;$ZZS1818 = $this->run_query_allrecords("SELECT r.relmodule AS `module` FROM vtiger_field f LEFT JOIN vtiger_fieldmodulerel r on r.fieldid=f.fieldid WHERE block = ". (int)$ZZZZz25." AND tablename = '$ZZZZx23' AND columnname = '$ZZZZy24'");return $ZZS1818;} function ZZZZA00($ZZZK1010){return $this->ZZZZl11("SELECT `group_id` as `id`, `level` FROM `advancedreports_sharedgroups` WHERE `report_id`=$ZZZK1010");} function ZZZZB11(){return $this->ZZZZl11("SELECT `groupid` as `id`, `groupname` as `name` FROM `vtiger_groups`");} function ZZZZC22(){return $this->ZZZZl11("SELECT `id`, `name` FROM `acl_roles`");} function ZZZZD33($ZZZZE44){$ZZZZF55 = array();$ZZZZG66 = $this->ZZZZl11("SELECT `user_id` FROM `acl_roles_users` WHERE `role_id` = '$ZZZZE44' AND `deleted` = 0 ");foreach($ZZZZG66 as $ZZZZf5){$ZZZZF55[] = $ZZZZf5['user_id'];} return $ZZZZF55;} function ZZZZH77($ZZZZf5,$ZZZZg6,$ZZZK1010){if(empty($ZZZZg6) || (count($ZZZZg6) == 1 && $ZZZZg6[0] == "")){$ZZZZg6 = array(-1);} $ZZq16 = "SELECT MAX(`level`) AS `level` FROM (SELECT `level` FROM `advancedreports_sharedgroups` WHERE `report_id` = $ZZZK1010 AND `group_id` IN (". implode(",",$this->ZZK1010($ZZZZg6)).") UNION ALL SELECT `level` FROM `advancedreports_sharedusers` WHERE `report_id` = $ZZZK1010 AND `user_id` = '$ZZZZf5' UNION ALL SELECT `sharedlevel` AS `level` FROM `advancedreports` WHERE `id` = $ZZZK1010 AND `shared` = 1) AS `lvl_tbl`";$ZZS1818 = $this->ZZZZl11($ZZq16);return $ZZS1818;} function ZZZZI88($report,$ZZZZJ99){$this->db->query("DELETE FROM advancedreports_sharedgroups WHERE report_id=$report");$ZZT1919 = count($ZZZZJ99);for($Zf5 = 0;$Zf5<$ZZT1919;$Zf5++){$this->ZZH77("INSERT INTO advancedreports_sharedgroups(`report_id`, `group_id`, `level`) VALUES(?,?,?)",$ZZZZJ99[$Zf5]);}} function ZZZZK1010($report,$ZZZZL1111){$this->db->query("DELETE FROM advancedreports_sharedusers WHERE report_id=$report");$ZZT1919 = count($ZZZZL1111);for($Zf5 = 0;$Zf5<$ZZT1919;$Zf5++){$this->ZZH77("INSERT INTO advancedreports_sharedusers(`report_id`, `user_id`, `level`) VALUES(?,?,?)",$ZZZZL1111[$Zf5]);}} function ZZZZM1212($report,$ZZZZJ99){$this->db->query("DELETE FROM advancedreports_schedule_g WHERE id=$report");$ZZT1919 = count($ZZZZJ99);for($Zf5 = 0;$Zf5<$ZZT1919;$Zf5++){$this->ZZH77("INSERT INTO advancedreports_schedule_g(`id`, `group`) VALUES(?,?)",array($report,$ZZZZJ99[$Zf5]));}} function ZZZZN1313($report,$ZZZZL1111){$this->db->query("DELETE FROM advancedreports_schedule_u WHERE id=$report");$ZZT1919 = count($ZZZZL1111);for($Zf5 = 0;$Zf5<$ZZT1919;$Zf5++){$this->ZZH77("INSERT INTO advancedreports_schedule_u(`id`, `user`) VALUES(?,?)",array($report,$ZZZZL1111[$Zf5]));}} function ZZZZO1414($report,$ZZZZP1515){$this->db->query("DELETE FROM advancedreports_schedule_r WHERE id=$report");$ZZT1919 = count($ZZZZP1515);for($Zf5 = 0;$Zf5<$ZZT1919;$Zf5++){$this->ZZH77("INSERT INTO advancedreports_schedule_r(`id`, `role`) VALUES(?,?)",array($report,$ZZZZP1515[$Zf5]));}} function ZZZZQ1616($ZZZZR1717="*", $ZZZZd3="", $ZZZZS1818="", $limit=""){$ZZq16 = "SELECT $ZZZZR1717 FROM `{$this->dbPrefix}advancedreports_categories`";if(!empty($ZZZZd3)){$ZZq16.=" WHERE {$ZZZZd3}";} if(!empty($ZZZZS1818)){$ZZq16.=" ORDER BY {$ZZZZS1818}";} if(!empty($limit)){$ZZq16.=" LIMIT {$limit}";} $ZZq16.=";";$ZZZZT1919 = $this->ZZZC22($ZZq16);return $ZZZZT1919;} function ZZZZU2020($ZZZZV2121){$ZZq16 = "SELECT MAX(`sequence`) FROM advancedreports WHERE category_id = {$ZZZZV2121['selectedCategory']}";$ZZZZ2525 = $this->ZZZC22($ZZq16);$ZZZZ2525 = $ZZZZ2525[0][0];if(empty($ZZZZ2525)){$ZZZZ2525 = 1;}else{$ZZZZ2525++;} $ZZZN1313 = $ZZZZV2121['owner'];$ZZZZW2222 = "";if($ZZZZV2121['customOptions']['enableCustomTables'] == 'true')$ZZZZW2222.=',"enableCustomTables":true';$ZZZg6 = "{\"includeDetails\":true,\"isCrosstab\":false,\"aggregateColumn\":false{$ZZZZW2222}}";$ZZq16 = "INSERT INTO `advancedreports`(`category_id`, `sequence`, `module`, `related_data`, `fields`, `filters`, `grouping`, `aggregates`, `totalAggregates`, `title`, `description`, `options`, `labels`, `chart`, `owner`, `shared`, `sharedlevel`, `iscombined`, `combinedfields`) VALUES ({$ZZZZV2121['selectedCategory']},{$ZZZZ2525},'{$ZZZZV2121['mainModuleName']}',{$ZZZZV2121['selectedModules']},'[]','[]','[]','[]','{}','{$ZZZZV2121['reportTitle']}','{$ZZZZV2121['reportDescription']}','{$ZZZg6}','{}','{\"chartTitle\":\"\",\"chartType\":\"pie\",\"chartLabels\":\"\",\"chartAxisX\":\"\",\"chartAxisY\":\"\",\"chartAxisY2\":\"\",\"chartYAxisType\":\"\",\"chartYAxis2Type\":\"\",\"chartLegend\":\"\",\"chartStacked\":false}','{$ZZZN1313}',0,0,{$ZZZZV2121['selectedReportType']},'{}');";$this->ZZZD33($ZZq16);$ZY2424 = $this->ZZZD33('SELECT last_insert_id()');list($ZZZZX2323) = $ZY2424->fetch_row();return $ZZZZX2323;} function ZZZZY2424(){return $this->ZZZZl11(" SELECT `lhs_module`, `join_table`, `rhs_module`, `join_key_lhs`, `join_key_rhs` FROM `relationships` WHERE `relationships`.`join_table` IS NOT NULL AND `relationships`.`deleted` = 0");} function ZZZZZ2525($ZZZZZa0, $Zu20, $value){$ZZZZZa0 = (int)$ZZZZZa0;if($ZZZZZa0 <= 0) return;if($Zu20 == "report") {$ZZq16 = "UPDATE `{$this->dbPrefix}advancedreports` SET `visible` = ? WHERE `id` = ? ";} else {$ZZq16 = "UPDATE `{$this->dbPrefix}advancedreports_categories` SET `visible` = ? WHERE `id` = ? ";$ZZZZZb1 = array();if($value == 1){$ZZZZZb1 = $this->ZZZZQ1616($ZZZZR1717="parent_id AS folder_id", $ZZZZd3="id={$ZZZZZa0}");}elseif($value == 0){$ZZZZZb1 = $this->ZZZZQ1616($ZZZZR1717="id AS folder_id", $ZZZZd3="parent_id={$ZZZZZa0}");} foreach($ZZZZZb1 as $ZZZZZc2){if($ZZZZZc2['folder_id'] ==0)continue;$this->ZZZZZ2525($ZZZZZc2['folder_id'], $Zu20, $value);}} $this->ZZH77($ZZq16, array($value, $ZZZZZa0));} function ZZZZZd3(){global $current_user, $mod_strings;$adb = DBManagerFactory::getInstance();$db = new ZZp15($adb);$ZZZZZe4 = new ZZZZZf5();$ZZZZe4 = $ZZZZZe4->ZZZZZg6($current_user);$ZZZZf5 = $ZZZZZe4->ZZZZZh7($current_user);$ZZZZg6 = $ZZZZZe4->getUserGroups($ZZZZf5);$ZZS1818 = null;$ZZZZi8 = " AND ";$ZZZZj9 = " `r`.`visible` = 1 ";if($ZZZZe4){$query = "SELECT r.*, 2 as `can_edit`, 1 as `can_delete` FROM advancedreports r WHERE ".$ZZZZj9." ORDER BY r.`sequence` ASC";}else{if(empty($ZZZZg6) || (count($ZZZZg6) == 1 && $ZZZZg6[0]=="")){$ZZZZg6 = array(-1);} $query = "SELECT r.* , `a`.`can_edit` as `can_edit`, `a`.`can_delete` as `can_delete` FROM advancedreports r LEFT JOIN (SELECT r2.`id` as id, COUNT(*) as 'cnt', IFNULL(IFNULL(SUM(`g`.`level`),0) +IFNULL(SUM(`u`.`level`),0) +IF(`r2`.`owner`='$ZZZZf5' OR `r2`.`sharedlevel`=1 ,1,0), 0) as `can_edit`, sum(IF(`u`.`level`=2,1,0)+ IF(`g`.`level`=2,1,0)+ IF(`r2`.`owner`='$ZZZZf5' OR `r2`.`sharedlevel`=2,1,0)) as `can_delete` FROM `advancedreports` `r2` LEFT JOIN `advancedreports_sharedusers` `u` on u.report_id = r2.id LEFT JOIN `advancedreports_sharedgroups` `g` on g.report_id = r2.id WHERE (r2.owner = '$ZZZZf5' OR u.user_id = '$ZZZZf5' OR g.group_id IN (". implode(",",$this->ZZK1010($ZZZZg6)).")) OR r2.shared = 1 GROUP BY r2.id) `a` ON `a`.`id` = `r`.`id` WHERE `a`.`cnt`>0 ".$ZZZZi8.$ZZZZj9." ORDER BY r.`sequence` ASC";} $ZZS1818 = $this->run_query_allrecords($query);return $ZZS1818;}} ;class ZZZZZf5{function ZZZZZh7($ZZZZZi8){return $ZZZZZi8->id;} function ZZZZZj9($ZZZZZi8){global $sugar_config;$ZZZZZk10 = '.';$ZZZZZl11 = ',';$ZZZZZm12 = $ZZZZZi8->getPreference('num_grp_sep');$ZZZZZn13 = $ZZZZZi8->getPreference('dec_sep');$ZZZZZo14 = $sugar_config['default_number_grouping_seperator'];$ZZZZZp15 = $sugar_config['default_decimal_seperator'];$ZZZZZm12 = isset($ZZZZZm12)? $ZZZZZm12:$ZZZZZo14;$ZZZZZn13 = isset($ZZZZZn13)? $ZZZZZn13:$ZZZZZp15;$ZZZZZm12 = isset($ZZZZZm12)? $ZZZZZm12:$ZZZZZk10;$ZZZZZn13 = isset($ZZZZZn13)? $ZZZZZn13:$ZZZZZl11;$ZZS1818 = array('format' => "123,456,789" , 'seperator' => $ZZZZZm12, 'decimal' => $ZZZZZn13);return $ZZS1818;} function ZZZZZq16($ZZZZZi8){$ZZZZZr17 = $ZZZZZi8->getUserDateTimePreferences();$ZZZZZr17['date'];$ZZZZZr17['time'];$ZZZZZr17['userGmt'];$ZZZZZr17['userGmtOffset'];return 'mm-dd-yyyy';} function ZZZZZs18(){echo "RECORD is not ACCESSIBLE";} function ZZZZZg6($ZZZZZi8){return is_admin($ZZZZZi8);} function getUserGroups($ZZZZf5){include_once "modules/ACLRoles/ACLRole.php";$ZZZZP1515 = ACLRole::getUserRoles($ZZZZf5, false);$ZZS1818 = array();foreach ($ZZZZP1515 as $Zu20 => $value) {$ZZS1818[] = $value->id;} return $ZZS1818;} function ZZZZZt19($ZZZZZu20){return array();return $ZZS1818;} function getRoleUsers($ZZZZE44, ZZp15 $db){$ZZZZZv21 = $db->ZZZZD33($ZZZZE44);return $ZZZZZv21;} function ZZZZZw22($ZZZZZx23,$module = ""){if(in_array($module,array("Inventory","Inventory2"))){$module = "SalesOrder";}elseif($module == "Events"){$module = "Calendar";if(in_array($ZZZZZx23,array("LBL_DURATION_H" ,"LBL_DURATION_DAY"))){$module = "AnalyticReporting";}}elseif(in_array($module,array("CampaignAcc","CampaignCont","CampaignLead"))){$module = "Campaigns";}elseif($module == "Leads" && $ZZZZZx23 == "LBL_LEAD_CONVERTED"){$module = "AnalyticReporting";} $ZZS1818 = translate($ZZZZZx23, $module);return $ZZS1818;} function ZZZZZy24($name,$module,ZZp15 $db){$ZZZZZz25 = $db->ZZN1313($name, $module);return $ZZZZZz25;} function ZZZZZA00($name,$module,ZZp15 $db){$ZZS1818 = array(1 =>	$this->ZZZZZw22("--None--",$module), 2 =>	$this->ZZZZZw22("Contacted - Successful",$module), 3 =>	$this->ZZZZZw22("Contacted - Unsuccessful",$module), 4 =>	$this->ZZZZZw22("Contacted - Never Contact Again",$module),);return $ZZS1818;} function ZZZZZB11($module){$ZZZZZC22 = $this->ZZZb1($module);return array('name'=>$ZZZZZC22->table_name,'idCol'=> 'id');} function ZZZZZD33($module){$ZZS1818 = null;if($module ==="Calendar" || $module ==="Activity" || $module ==="Events"){include_once "modules/Calendar/Activity.php";$ZZS1818 = new Activity();}elseif($module ==="Inventory"){$ZZS1818 = array('tab_name_index' => array('vtiger_inventoryproductrel'=>'lineitem_id'), 'table_name' => 'vtiger_inventoryproductrel', 'table_index' => 'lineitem_id');}elseif($module ==="Inventory2"){$ZZS1818 = array('tab_name_index' => array('vtiger_inventoryproductrel'=>'lineitem_id'), 'table_name' => 'vtiger_inventoryproductrel', 'table_index' => 'lineitem_id');}elseif($module == "CampaignAcc"){$ZZS1818 = array('tab_name_index' => array('vtiger_campaignaccountrel'=>'accountid'), 'table_name' => 'vtiger_campaignaccountrel', 'table_index' => 'accountid');}elseif($module == "CampaignCont"){$ZZS1818 = array('tab_name_index' => array('vtiger_campaigncontrel'=>'contactid'), 'table_name' => 'vtiger_campaigncontrel', 'table_index' => 'contactid');}elseif($module == "CampaignLead"){$ZZS1818 = array('tab_name_index' => array('vtiger_campaignleadrel'=>'leadid'), 'table_name' => 'vtiger_campaignleadrel', 'table_index' => 'leadid');} return ($ZZS1818)? ((object) $ZZS1818): ($ZZS1818);} function ZZZb1($module){$ZZZZZC22 = $this->ZZZZZD33($module);if(!$ZZZZZC22){$ZZZZZC22 = PlatformConnector::ZZZb1($module);} return $ZZZZZC22;} function ZZZZZE44($module){$ZZZZZC22 = $this->ZZZb1($module);$ZZS1818 = array();$ZZZZZF55 = 'id';$ZZS1818[] = array('name' => $ZZZZZC22->table_name, 'idCol' => $ZZZZZF55);$ZZS1818[] = array('name' => $ZZZZZC22->table_name."_cstm", 'idCol' => $ZZZZZF55."_c");return $ZZS1818;} function ZZZZZG66($field,$db){$ZZS1818 = array();$ZZZH77 = $db->ZZZZw22($field['tablename'],$field['columnname'],$field['block']);foreach($ZZZH77 as $ZZZZZH77){$ZZS1818[] = $ZZZZZH77["module"];} return $ZZS1818;} function ZZZZZI88($field,$db,$ZZZZZJ99,$module = false){$ZZS1818 = false;if($field['fieldname']=="00_ALL_assigned_user_id"){return false;} if($this->ZZZZZK1010($field)){$ZZS1818 = true;}else{$module = ($module)?($module):($ZZZZZJ99[$field['module']]->name);if($module == 'oqc_Service') {return false;} $ZZZZZL1111 = $db->ZZZw22($module,$field);if(!empty($ZZZZZL1111["field"])){$ZZZZZM1212 = array_search($field['fieldname'],$ZZZZZL1111["names"]);$ZZZZZN1313 = array_search($field['fieldname_org'],$ZZZZZL1111["names"]);if($ZZZZZM1212!==false || $ZZZZZN1313!==false){$ZZS1818 = true;}}} return $ZZS1818;} function ZZZZZO1414($field){$ZZS1818 = false;if(in_array($field["uitype"], array('int', 'currency', 'number', 'float'))){$ZZS1818 = true;} return $ZZS1818;} function ZZZZZP1515($field){$ZZS1818 = false;if(in_array($field["uitype"],array('datetime', 'datetimecombo'))){$ZZS1818 = true;} return $ZZS1818;} function ZZZZZK1010($field){if(isset($field['uitype']) && in_array($field['uitype'], array('relate', 'assigned_user_name'))) {return true;} return false;} function ZZZZZQ1616($ZZZZZR1717){$ZZZZZS1818 = array(1 => "Jan", 2 => "Feb", 3 => "Mar", 4 => "Apr", 5 => "May", 6 => "Jun", 7 => "Jul", 8 => "Aug", 9 => "Sep", 10=> "Oct", 11=> "Nov", 12=> "Dec",);return $ZZZZZS1818[$ZZZZZR1717];} function ZZZZZT1919($ZZZc2, $ZZZO1414 = false){$ZZS1818 = array();$ZZT1919 = count($ZZZc2);if($ZZZc2[$ZZT1919-1] == "-"){array_pop($ZZZc2);$ZZT1919--;} for($Zf5 = 0;$Zf5<$ZZT1919;$Zf5++){$ZZS1818[$ZZZc2[$Zf5]["fieldname"]] = $ZZZc2[$Zf5];} $ZZZZZU2020 = count($ZZZO1414);$ZZZZZV2121 = array();for($ZZZZZW2222 = 0;$ZZZZZW2222 < $ZZZZZU2020;$ZZZZZW2222++) {if(isset($ZZZO1414[$ZZZZZW2222]["dateGrouping"]) && !empty($ZZZO1414[$ZZZZZW2222]["dateGrouping"])) {$ZZZZZX2323 = $ZZZO1414[$ZZZZZW2222]["name"] . '_' . $ZZZO1414[$ZZZZZW2222]["dateGrouping"];$ZZZZZV2121[$ZZZZZX2323] = $ZZZO1414[$ZZZZZW2222]["dateGrouping"];}} if(isset($ZZZZZV2121)) {for($Zf5 = 0;$Zf5 < $ZZT1919;$Zf5++){if(isset($ZZZc2[$Zf5]["dateGrouping"]) && !empty($ZZZc2[$Zf5]["dateGrouping"])) {if($ZZZZZV2121[$ZZZc2[$Zf5]["fieldname"]]) {foreach($ZZZZZV2121 as $ZZZZZY2424 => $ZZZZZZ2525) {$ZZZZZZa0 = $ZZZc2[$Zf5];$ZZZZZZa0["fieldname"] = $ZZZZZY2424;$ZZZZZZa0["dateGrouping"] = $ZZZZZZ2525;$ZZS1818[$ZZZZZY2424] = $ZZZZZZa0;}}}}} return $ZZS1818;} function ZZZZZZb1($ZZZZZZc2, $ZZZZZZd3){$ZZZZZZe4 = array();foreach ($ZZZZZZc2 as $report) {$ZZZZZZf5 = array('name' => $report['id'], 'title' => $report['title'],);if($ZZZZZZd3 == $report['id']){$ZZZZZZf5['title'] = "Current";array_unshift($ZZZZZZe4, $ZZZZZZf5);continue;} $ZZZZZZe4[] = $ZZZZZZf5;} return $ZZZZZZe4;} function ZZZZZZg6($G66=array(), $ZZZZZZh7=""){foreach ($G66 as $ZZZZZZi8 => $value) {$G66[$ZZZZZZi8] = "{$ZZZZZZh7}".$value."{$ZZZZZZh7}";} return $G66;}}
;class PlatformConnector {static private $ZZZZZZj9 = null;public static function ZZZZZZk10($moduleName){$ZZZa0 = self::ZZZb1($moduleName);$ZZY2424 = $ZZZa0->table_name;return $ZZY2424;} public static function ZZZZZZl11() {$ZZZZZZm12 = array('AnalyticReporting');$ZZZZZZn13 = array('AOS_Products_Quotes', 'EmailAddresses', 'ProjectTask', 'Users', 'CampaignLog', 'EmailMarketing', 'CampaignTrackers');$moduleList = array_intersect($GLOBALS['moduleList'],array_keys($GLOBALS['beanList']));foreach($ZZZZZZm12 as $module){if($Zu20=array_search($module, $moduleList)) unset($moduleList[$Zu20]);} foreach ($ZZZZZZn13 as $ZZZZZZi8 => $ZZZZZZo14) {if(isset($GLOBALS['beanList'][$ZZZZZZo14]) && !in_array($ZZZZZZo14, $moduleList)){$moduleList[] = $ZZZZZZo14;}} return $moduleList;} public static function ZZZb1($moduleName) {return FunctionWrapper::_getBean($moduleName);} public static function ZZZZZg6($ZZZZZi8) {if(is_admin($ZZZZZi8))return true;return false;} public static function getSystemUser($ZZZZf5 = null) {global $current_user;$ZZZZZZp15 = $current_user;if($current_user->id != $ZZZZf5) {$ZZZZZZp15 = new User();$ZZZZZZp15 = $ZZZZZZp15->retrieve($ZZZZf5);} return $ZZZZZZp15;} public static function ZZZZZZq16($ZZZZf5 = null) {global $current_user;if(!$ZZZZf5) {global $current_user;$ZZZZZi8 = $current_user;} else {$ZZZZZi8 = new User();$ZZZZZi8 = $ZZZZZi8->retrieve($ZZZZf5);} return self::ZZZZZZr17($ZZZZZi8);} public static function getAdminUser() {include_once "modules/Users/User.php";$ZZZZZi8 = new User();return self::ZZZZZZr17($ZZZZZi8->getSystemUser());} public static function ZZZZZZr17(User $ZZZZZi8) {$ZZZZZZs18 = 24;if (strpos($ZZZZZi8->getPreference('timef'), 'H') === false) {$ZZZZZZs18 = 12;} global $sugar_config;$ZZZZZZt19 = '.';$ZZZZZl11 = ',';$ZZZZZZu20 = 2;$ZZZZZZv21 = $ZZZZZi8->getPreference('num_grp_sep');$ZZZZZn13 = $ZZZZZi8->getPreference('dec_sep');$ZZZZZZw22 = $ZZZZZi8->getPreference('default_currency_significant_digits');$ZZZZZZx23 = $sugar_config['default_number_grouping_seperator'];$ZZZZZp15 = $sugar_config['default_decimal_seperator'];$ZZZZZZy24 = $sugar_config['default_currency_significant_digits'];$ZZZZZZv21 = isset($ZZZZZZv21)? $ZZZZZZv21:$ZZZZZZx23;$ZZZZZn13 = isset($ZZZZZn13)? $ZZZZZn13:$ZZZZZp15;$ZZZZZZw22 = isset($ZZZZZZw22)? $ZZZZZZw22:$ZZZZZZy24;$ZZZZZZv21 = isset($ZZZZZZv21)? $ZZZZZZv21:$ZZZZZZt19;$ZZZZZn13 = isset($ZZZZZn13)? $ZZZZZn13:$ZZZZZl11;$ZZZZZZw22 = isset($ZZZZZZw22)? $ZZZZZZw22:$ZZZZZZu20;$numberPreferences = array('format' => "123,456,789" , 'separator' => $ZZZZZZv21, 'decimal' => $ZZZZZn13, 'currencySignificantDigits' => $ZZZZZZw22);$ZZZF55 = array('id' => $ZZZZZi8->id, 'numberPreferences' => array('format' => $numberPreferences['format'], 'seperator' => $numberPreferences['separator'], 'decimal' => $numberPreferences['decimal'], 'currencySignificantDigits' => $numberPreferences['currencySignificantDigits'],), 'hourFormat' => $ZZZZZZs18, 'dateFormat' => "yyyy-mm-dd", 'timeZone' => TimeDate::userTimezone($ZZZZZi8), 'isAdmin' => is_admin($ZZZZZi8), 'email' => $ZZZZZi8->emailAddress->getPrimaryAddress($ZZZZZi8), 'name' => $ZZZZZi8->full_name, 'roleIds' => array(),);return new ARUser($ZZZF55);} public static function ZZZZZZz25($ZZZZZZA00){$ZZZZZZB11 = array();foreach ($ZZZZZZA00 as $ZZZZZZC22) {$ZZZZZZB11[$ZZZZZZC22['lhs_module']][] = array('tableName' => $ZZZZZZC22['join_table'], 'applicableModules' => array(0 => $ZZZZZZC22['rhs_module']), 'relModule' => false, 'columns' => array(0 => array('name' => $ZZZZZZC22['join_key_lhs'], 'title' => $ZZZZZZC22['join_key_lhs']), 1 => array('name' => $ZZZZZZC22['join_key_rhs'], 'title' => $ZZZZZZC22['join_key_rhs'])));} return $ZZZZZZB11;} public static function ZZZZZZD33(){if(!isset(self::$ZZZZZZj9)){self::$ZZZZZZj9 = new ZZp15(DBManagerFactory::getInstance());} return self::$ZZZZZZj9;} public static function ZZZZZZE44($ZZZZZZF55) {foreach($ZZZZZZF55 as &$ZZZZZZG66) {if(is_string($ZZZZZZG66)) {$ZZZZZZG66 = str_replace('"00_', '"m00_', $ZZZZZZG66);$ZZZZZZG66 = str_replace('"0_', '"m0_', $ZZZZZZG66);$ZZZZZZG66 = str_replace('"1_', '"m1_', $ZZZZZZG66);$ZZZZZZG66 = str_replace('"2_', '"m2_', $ZZZZZZG66);$ZZZZZZG66 = str_replace('"3_', '"m3_', $ZZZZZZG66);$ZZZZZZG66 = str_replace('"4_', '"m4_', $ZZZZZZG66);$ZZZZZZG66 = str_replace('"5_', '"m5_', $ZZZZZZG66);$ZZZZZZG66 = str_replace('"6_', '"m6_', $ZZZZZZG66);$ZZZZZZG66 = str_replace('"7_', '"m7_', $ZZZZZZG66);$ZZZZZZG66 = str_replace('"8_', '"m8_', $ZZZZZZG66);$ZZZZZZG66 = str_replace('"9_', '"m9_', $ZZZZZZG66);}} return $ZZZZZZF55;} public static function ZZZZZZH77() {$adb = DBManagerFactory::getInstance();return new ZZp15($adb);} public static function ZZZZZZI88() {if(DBManagerFactory::getInstance()->dbType == "mysql") {return "mysql";} else {return "mssql";}} public static function getUrl($S1818 = "") {$ZU2020 = SugarConfig::getInstance();$ZZZZZZJ99 = $ZU2020->get('site_url');$ZZZZZZi8 = "/index.php";if (PlatformConnector::ZZZZZZK1010()) {$ZZZZZZi8 = "/#bwc/index.php";} $ZZZZZZJ99 .= $ZZZZZZi8;if(!empty($S1818)){$ZZZZZZJ99 .= $S1818;} return $ZZZZZZJ99;} public static function ZZZZZZK1010(){global $sugar_version;if (version_compare($sugar_version, '7.0.0') >= 0) {return true;} return false;} public static function ZZZZZZL1111(){global $current_user;$ZZZZZi8 = $current_user;global $sugar_config;$ZZZZZZu20 = 2;$ZZZZZZw22 = $ZZZZZi8->getPreference('default_currency_significant_digits');$ZZZZZZy24 = $sugar_config['default_currency_significant_digits'];$ZZZZZZw22 = isset($ZZZZZZw22)? $ZZZZZZw22:$ZZZZZZy24;$ZZZZZZw22 = isset($ZZZZZZw22)? $ZZZZZZw22:$ZZZZZZu20;return $ZZZZZZw22;} public static function ZZZZZZM1212(ARUser $ZZZZZi8, $value){global $timedate;if(empty($value)){return $value;} $value = self::ZZZZZZN1313($ZZZZZi8, $value);return $timedate->getDatePart($value);} public static function ZZZZZZN1313(ARUser $ZZZZZi8, $value){global $timedate;$ZZZZZZp15 = PlatformConnector::getSystemUser($ZZZZZi8->ZZZZZZO1414());$ZZZZZZP1515 = $timedate->fromDb($value, true);if(empty($ZZZZZZP1515)){return $value;} $ZZZZZZQ1616 = $timedate->tzUser($ZZZZZZP1515, $ZZZZZZp15);return $ZZZZZZQ1616->asDb(false);} public static function getDate($ZZZZZi8, $value){global $timedate;$value = self::ZZZZZZR1717($ZZZZZi8, $value);return $timedate->getDatePart($value);} public static function ZZZZZZR1717($ZZZZZi8, $value){global $timedate;$ZZZZZZQ1616 = $timedate->fromDb($value, true);return $ZZZZZZQ1616->asDb(true);} public static function ZZZZZZS1818(ARUser $ZZZZZi8, $value) {global $timedate;if(empty($value)){return $value;} $ZZZZZZp15 = PlatformConnector::getSystemUser($ZZZZZi8->ZZZZZZO1414());$ZZZZZZT1919 = $timedate->fromString($value);$ZZZZZZQ1616 = $timedate->tzUser($ZZZZZZT1919, $ZZZZZZp15);return $ZZZZZZQ1616->asDb(true);} public static function ZZZZZZU2020(ARUser $ZZZZZi8) {global $timedate;$ZZZZZZp15 = PlatformConnector::getSystemUser($ZZZZZi8->ZZZZZZO1414());$ZZZZZZV2121 = $timedate->getNow();$ZZZZZZQ1616 = $timedate->tzUser($ZZZZZZV2121, $ZZZZZZp15);return $ZZZZZZQ1616->get_day_begin()->asDb(true);} public static function ZZZZZZW2222(ARUser $ZZZZZi8) {global $timedate;$ZZZZZZp15 = PlatformConnector::getSystemUser($ZZZZZi8->ZZZZZZO1414());$ZZZZZZV2121 = $timedate->getNow();$ZZZZZZQ1616 = $timedate->tzUser($ZZZZZZV2121, $ZZZZZZp15);return $ZZZZZZQ1616->get_day_end()->asDb(true);} public static function ZZZZZZX2323(ARUser $ZZZZZi8, $ZZZZZZY2424 = false) {global $timedate;$ZZZZZZp15 = PlatformConnector::getSystemUser($ZZZZZi8->ZZZZZZO1414());$value = $ZZZZZZp15->getPreference('timezone', 'global');if (!$value) {$value = $timedate->guessTimezone();} if (!$value) {$value = 'UTC';} return $value;} public static function ZZZZZZZ2525($name = "UTC") {$ZZZZZZZa0 = new DateTimeZone($name);$ZZZZZZV2121 = new DateTime("now", $ZZZZZZZa0);return $ZZZZZZV2121->format("P");}}
;abstract class ZZZZZZZb1 {protected $db;function __construct() {$this->db = PlatformConnector::ZZZZZZH77();}}
;class ZZZZZZZc2 extends ZZZZZZZb1
{function ZZZZZZZd3($ZZZW2222, $ZZZZh7) {$ZZZZZZZe4 = " AND visible = 1 ";if($ZZZZh7) {$ZZZZZZZe4 = "";} $ZZn13 = $this->db->ZZZC22("SELECT COUNT(*) AS count FROM {$this->db->dbPrefix}advancedreports WHERE category_id = ". (int)$ZZZW2222 . " " . $ZZZZZZZe4);return $ZZn13[0]['count'];} function ZZZZZZZf5($limit) {$ZZZH77 = $this->db->run_query_allrecords("SELECT id, options FROM {$this->db->dbPrefix}advancedreports WHERE options LIKE '%limit%'");$ZZZZZZZg6 = count($ZZZH77);for($Zf5=0;$Zf5 < $ZZZZZZZg6;$Zf5++){$ZZZg6 = json_decode($ZZZH77[$Zf5]['options'], true);$ZZZg6['limit'] = $limit;$ZZZg6 = json_encode($ZZZg6);$this->db->ZZH77("UPDATE {$this->db->dbPrefix}advancedreports SET options = ? WHERE id = ? ", array($ZZZg6, $ZZZH77[$Zf5]['id']));}} function ZZZZZZZh7(array $ZZZZZZZi8) {$ZZZZZZc2 = $this->db->run_query_allrecords("SELECT id, columnstate FROM {$this->db->dbPrefix}advancedreports");$ZZZZZZZj9 = count($ZZZZZZc2);for($Zf5=0;$Zf5<$ZZZZZZZj9;$Zf5++){$ZZZZZZZk10 = array();if($ZZZZZZc2[$Zf5]['columnstate'] !== NULL){$ZZZZZZZk10 = json_decode($ZZZZZZc2[$Zf5]['columnstate'], true);} $ZZZZZZZk10['sectionStates'] = $ZZZZZZZi8;$ZZZZZZZk10 = json_encode($ZZZZZZZk10);$this->db->ZZH77("UPDATE {$this->db->dbPrefix}advancedreports SET columnstate = ? WHERE id = ?", array($ZZZZZZZk10,$ZZZZZZc2[$Zf5]['id']));}} function ZZZZZd3(ARUser $ZZZZZi8) {$ZZZZZe4 = new ZZZZZf5();$ZZZZZZZl11 = $ZZZZZe4->getUserGroups($ZZZZZi8->ZZZZZZO1414());if(empty($ZZZZZZZl11)){$ZZZZZZZl11 = array(-1);} $query = "SELECT r.*, a.can_edit as can_edit, a.can_delete as can_delete". " FROM {$this->db->dbPrefix}advancedreports r LEFT JOIN (SELECT r2.id as id, COUNT(*) as 'cnt', COALESCE(COALESCE(SUM(g.level),0) +COALESCE(SUM(u.level),0) +".ZZZZZZZm12::ZZZZZZZn13("r2.owner='{$ZZZZZi8->ZZZZZZO1414()}' OR r2.sharedlevel=1", 1, 0).", 0) as can_edit, sum(". ZZZZZZZm12::ZZZZZZZn13('u.level=2', 1, 0)."+". ZZZZZZZm12::ZZZZZZZn13('g.level=2', 1, 0)."+". ZZZZZZZm12::ZZZZZZZn13("r2.owner='{$ZZZZZi8->ZZZZZZO1414()}' OR r2.sharedlevel=1", 1, 0). ") as can_delete FROM {$this->db->dbPrefix}advancedreports r2 LEFT JOIN {$this->db->dbPrefix}advancedreports_sharedusers u on u.report_id = r2.id LEFT JOIN {$this->db->dbPrefix}advancedreports_sharedgroups g on g.report_id = r2.id WHERE (r2.owner = '{$ZZZZZi8->ZZZZZZO1414()}}' OR u.user_id = '{$ZZZZZi8->ZZZZZZO1414()}}' OR g.group_id IN (". implode(",",$this->db->ZZK1010($ZZZZZZZl11)).")) OR r2.shared = 1 GROUP BY r2.id, r2.sharedlevel, r2.owner) a ON a.id = r.id WHERE a.cnt>0";if($ZZZZZi8->ZZZZZg6()){$query = "SELECT r.* FROM {$this->db->dbPrefix}advancedreports r";} $report = $this->db->run_query_allrecords($query);return $report;} function listReports($ZZZZe4,$ZZZZf5,$ZZZZg6,$ZZZW2222=null,$ZZZZh7=false, $ZZZZZZZo14=false, $ZZZZZZZp15=false){$ZZS1818 = null;$ZZZZi8 = " AND ";$ZZZZj9 = " r.visible = 1 ";if($ZZZZh7) {$ZZZZi8 = "";$ZZZZj9 = "";} $ZZZZZZZq16 = "";if($ZZZW2222 != "#"){$ZZZZZZZq16 = " AND r.category_id = ". (int) $ZZZW2222;} $ZZZZZZZr17 = "";$ZZZZZZZs18 = "";$ZZZZS1818 = " ORDER BY r.sequence ASC";$ZZZZZZZt19 = "";if($ZZZZZZZo14){$ZZZZZZZs18 = ", 0";if($ZZZZZZZo14){global $mod_strings;$ZZZZZZZu20 = "/(".implode("|", $ZZZZZZZo14).")/i";$ZZZZZZZv21 = preg_grep($ZZZZZZZu20, $mod_strings);foreach ($ZZZZZZZv21 as $Zu20 => $value) {if($Zu20 != $value){$ZZZZZZZs18.= " +(CASE WHEN r.title LIKE '".$Zu20."' THEN 1 ELSE 0 END)";$ZZZZZZZr17.= " OR r.title LIKE '".$Zu20."'";}}} $ZZZZZZZt19 = " AND (1=2";$ZZZZZZZw22 = " OR ";if($ZZZZZZZp15){$ZZZZZZZt19 = " AND (1=1";$ZZZZZZZw22 = " AND ";} $ZZZZS1818 = " ORDER BY relevance DESC";foreach ($ZZZZZZZo14 as $ZZZZZZZx23) {$ZZZZZZZs18.= " +(CASE WHEN r.title LIKE '%".$ZZZZZZZx23."%' THEN 1 ELSE 0 END)";$ZZZZZZZs18.= " +(CASE WHEN r.description LIKE '%".$ZZZZZZZx23."%' THEN 1 ELSE 0 END)";$ZZZZZZZt19.= $ZZZZZZZw22."((r.title LIKE '%".$ZZZZZZZx23."%') OR (r.description LIKE '%".$ZZZZZZZx23."%'))";} $ZZZZZZZs18.= " as relevance";$ZZZZZZZt19.= ")";} if($ZZZZe4){$query = "SELECT r.*, 2 as can_edit, 1 as can_delete".$ZZZZZZZs18." FROM {$this->db->dbPrefix}advancedreports r WHERE 1=1".$ZZZZZZZq16.$ZZZZZZZt19.$ZZZZZZZr17.$ZZZZi8.$ZZZZj9.$ZZZZS1818;}else{if(empty($ZZZZg6) || (count($ZZZZg6) == 1 && $ZZZZg6[0]=="")){$ZZZZg6 = array(-1);} $query = "SELECT r.* , a.can_edit as can_edit, a.can_delete as can_delete".$ZZZZZZZs18. " FROM {$this->db->dbPrefix}advancedreports r LEFT JOIN (SELECT r2.id as id, COUNT(*) as 'cnt', COALESCE(COALESCE(SUM(g.level),0) +COALESCE(SUM(u.level),0) +".ZZZZZZZm12::ZZZZZZZn13("r2.owner='{$ZZZZf5}' OR r2.sharedlevel=1", 1, 0).", 0) as can_edit, sum(". ZZZZZZZm12::ZZZZZZZn13('u.level=2', 1, 0)."+". ZZZZZZZm12::ZZZZZZZn13('g.level=2', 1, 0)."+". ZZZZZZZm12::ZZZZZZZn13("r2.owner='{$ZZZZf5}' OR r2.sharedlevel=1", 1, 0). ") as can_delete FROM {$this->db->dbPrefix}advancedreports r2 LEFT JOIN {$this->db->dbPrefix}advancedreports_sharedusers u on u.report_id = r2.id LEFT JOIN {$this->db->dbPrefix}advancedreports_sharedgroups g on g.report_id = r2.id WHERE (r2.owner = '$ZZZZf5' OR u.user_id = '$ZZZZf5' OR g.group_id IN (". implode(",",$this->db->ZZK1010($ZZZZg6)).")) OR r2.shared = 1 GROUP BY r2.id, r2.sharedlevel, r2.owner) a ON a.id = r.id WHERE a.cnt>0". $ZZZZZZZq16. $ZZZZZZZt19. $ZZZZZZZr17. $ZZZZi8.$ZZZZj9. $ZZZZS1818;} $ZZS1818 = $this->db->run_query_allrecords($query);return $ZZS1818;} function ZZZJ99($ZZZK1010, $ZZZL1111, $ZZZM1212, $ZZZN1313) {if($ZZZL1111 == "PUB"){$ZZZL1111 = 1;if($ZZZM1212=="EDIT"){$ZZZM1212 = 1;}elseif($ZZZM1212=="DELETE"){$ZZZM1212 = 2;}else{$ZZZM1212 = 0;}}else{$ZZZL1111 = 0;$ZZZM1212 = 0;} $ZZq16 = "UPDATE {$this->db->dbPrefix}advancedreports SET shared=?, sharedlevel=?, owner=? WHERE id = ?";$ZZZF55 = array($ZZZL1111, $ZZZM1212, $ZZZN1313, $ZZZK1010);$ZY2424 = $this->db->ZZH77($ZZq16,$ZZZF55);return $ZY2424;} function saveReport($id, $ZZZc2, $filters, $ZZZO1414, $ZZZP1515, $ZZZQ1616, $ZZZg6, $ZZZR1717, $ZZZS1818,$ZZZL1111,$ZZZM1212,$ZZZN1313,$ZZZT1919,$ZZZU2020 = null, $ZZZZZZZk10){if($ZZZL1111 == "PUB"){$ZZZL1111 = 1;if($ZZZM1212=="EDIT"){$ZZZM1212 = 1;}elseif($ZZZM1212=="DELETE"){$ZZZM1212 = 2;}else{$ZZZM1212 = 0;}}else{$ZZZL1111 = 0;$ZZZM1212 = 0;} $ZZq16 = "UPDATE {$this->db->dbPrefix}advancedreports SET fields=".ZZZZZZZm12::ZZZZZZZy24($ZZZc2).", filters = ".ZZZZZZZm12::ZZZZZZZy24($filters).", grouping = ".ZZZZZZZm12::ZZZZZZZy24($ZZZO1414).", aggregates = ".ZZZZZZZm12::ZZZZZZZy24($ZZZP1515).", totalAggregates = ".ZZZZZZZm12::ZZZZZZZy24($ZZZQ1616).", options = ".ZZZZZZZm12::ZZZZZZZy24($ZZZg6).", labels = ".ZZZZZZZm12::ZZZZZZZy24($ZZZR1717).", chart = ".ZZZZZZZm12::ZZZZZZZy24($ZZZS1818).", shared=?, sharedlevel=?, owner=?, calcFields= ".ZZZZZZZm12::ZZZZZZZy24($ZZZT1919).", columnstate = ".ZZZZZZZm12::ZZZZZZZy24($ZZZZZZZk10);$ZZZF55 = array($ZZZL1111, $ZZZM1212, $ZZZN1313,);if($ZZZU2020!=null){$ZZq16.= ", combinedfields=".ZZZZZZZm12::ZZZZZZZy24($ZZZU2020);} $ZZq16.= " WHERE id = ?";$ZZZF55[] = $id;$ZY2424 = $this->db->ZZH77($ZZq16,$ZZZF55,true);} function ZZZV2121($module, $ZZZW2222, $ZZZX2323, $ZZZc2, $filters, $ZZZO1414, $ZZZP1515, $ZZZQ1616, $ZZZg6, $ZZZR1717, $title,$description,$ZZZS1818,$ZZZL1111,$ZZZM1212,$ZZZN1313,$ZZZT1919,$isCombined = 0, $ZZZY2424 = null, $ZZZZZZZk10){if($ZZZL1111 == "PUB"){$ZZZL1111 = 1;if($ZZZM1212=="EDIT"){$ZZZM1212 = 1;}elseif($ZZZM1212=="DELETE"){$ZZZM1212 = 2;}else{$ZZZM1212 = 0;}}else{$ZZZL1111 = 0;$ZZZM1212 = 0;} $ZZS1818 = $this->db->ZZH77("SELECT COALESCE(MAX(sequence) + 1, 0) AS sequence FROM {$this->db->dbPrefix}advancedreports WHERE category_id = ? ", array($ZZZW2222));$ZZZZ2525 = $this->db->ZZI88($ZZS1818, 'sequence');$ZZq16 = "INSERT INTO {$this->db->dbPrefix}advancedreports (module, category_id, sequence, related_data, fields, filters, grouping, aggregates, totalAggregates, title, description, options, labels, chart, shared, sharedlevel, owner, iscombined, combinedfields, calcFields, columnstate) VALUES (?, ?, ?, ".ZZZZZZZm12::ZZZZZZZy24($ZZZX2323).", ".ZZZZZZZm12::ZZZZZZZy24($ZZZc2).", ".ZZZZZZZm12::ZZZZZZZy24($filters).", ".ZZZZZZZm12::ZZZZZZZy24($ZZZO1414).", ".ZZZZZZZm12::ZZZZZZZy24($ZZZP1515).", ".ZZZZZZZm12::ZZZZZZZy24($ZZZQ1616).", ?, ?, ".ZZZZZZZm12::ZZZZZZZy24($ZZZg6).", ".ZZZZZZZm12::ZZZZZZZy24($ZZZR1717).", ".ZZZZZZZm12::ZZZZZZZy24($ZZZS1818).", ?, ?, ?, ?, ".ZZZZZZZm12::ZZZZZZZy24($ZZZY2424).", ".ZZZZZZZm12::ZZZZZZZy24($ZZZT1919).", ".ZZZZZZZm12::ZZZZZZZy24($ZZZZZZZk10).")";$ZZZF55 = array($module, $ZZZW2222, $ZZZZ2525, $title, $description, $ZZZL1111, $ZZZM1212, $ZZZN1313, $isCombined,);$this->db->setDieOnError(true);$this->db->ZZH77($ZZq16, $ZZZF55);$ZZS1818 = $this->db->run_query_allrecords("SELECT ".ZZZZZZZm12::ZZZZZZZz25()." AS id");return $ZZS1818[0]['id'];} function ZZZZZZZA00($ZZZZZZZB11 = array(), $id = 0) {$id = (int)$id;if($id <= 0){return;} $ZZq16 = "";foreach ($ZZZZZZZB11 as $Zu20 => $value) {switch ($Zu20){case 'related_data': case 'options': $ZZq16 .= $Zu20." = ".ZZZZZZZm12::ZZZZZZZy24($value).",";break;default: $ZZq16 .= $Zu20." = '".$value."',";break;}} $ZZq16 = rtrim($ZZq16, ",");$ZZq16 = "UPDATE {$this->db->dbPrefix}advancedreports SET {$ZZq16} WHERE id = {$id}";return $this->db->ZZH77($ZZq16, array());} function ZZZZU2020($ZZZZV2121){$ZZq16 = "SELECT MAX(sequence) FROM {$this->db->dbPrefix}advancedreports WHERE category_id = {$ZZZZV2121['selectedCategory']}";$ZZZZ2525 = $this->db->ZZZC22($ZZq16);$ZZZZ2525 = $ZZZZ2525[0][0];if(empty($ZZZZ2525)){$ZZZZ2525 = 1;}else{$ZZZZ2525++;} $ZZZN1313 = $ZZZZV2121['owner'];$ZZZZW2222 = "";if($ZZZZV2121['customOptions']['enableAudit'] == 'true')$ZZZZW2222.=',"enableAudit":true';if($ZZZZV2121['customOptions']['enableCustomTables'] == 'true')$ZZZZW2222.=',"enableCustomTables":true';if($ZZZZV2121['selectedReportType'] == 1)$ZZZZW2222.=',"isCombined":true';$ZZZg6 = "{\"includeDetails\":true,\"isCrosstab\":false,\"aggregateColumn\":false{$ZZZZW2222}}";$ZZq16 = "INSERT INTO {$this->db->dbPrefix}advancedreports(category_id, sequence, module, related_data, fields, filters, grouping, aggregates, totalAggregates, title, description, options, labels, chart, owner, shared, sharedlevel, iscombined, combinedfields) VALUES ({$ZZZZV2121['selectedCategory']}, {$ZZZZ2525}, '{$ZZZZV2121['mainModuleName']}', ".ZZZZZZZm12::ZZZZZZZy24($ZZZZV2121['selectedModules']).", ".ZZZZZZZm12::ZZZZZZZy24('[]').", ".ZZZZZZZm12::ZZZZZZZy24('[]').", ".ZZZZZZZm12::ZZZZZZZy24('[]').", ".ZZZZZZZm12::ZZZZZZZy24('[]').", ".ZZZZZZZm12::ZZZZZZZy24('{}').", '{$ZZZZV2121['reportTitle']}', '{$ZZZZV2121['reportDescription']}', ".ZZZZZZZm12::ZZZZZZZy24($ZZZg6).", ".ZZZZZZZm12::ZZZZZZZy24('{}').", ".ZZZZZZZm12::ZZZZZZZy24('{"chartTitle":"","chartType":"pie","chartLabels":"","chartAxisX":"","chartAxisY":"","chartAxisY2":"","chartYAxisType":"","chartYAxis2Type":"","chartLegend":"","chartStacked":false}').", '{$ZZZN1313}', 0, 0, {$ZZZZV2121['selectedReportType']}, ".ZZZZZZZm12::ZZZZZZZy24('{"sortAction":"group","dateGrouping":"day","sortDirection":"ASC","position":"column","fields":{}}').");";$this->db->ZZZD33($ZZq16);$ZY2424 = $this->db->ZZZD33("SELECT ".ZZZZZZZm12::ZZZZZZZz25()." AS id");$ZZr17 = $this->db->fetchRow($ZY2424);return $ZZr17['id'];} function ZZZZk10($id,$title,$description){$this->db->ZZH77("UPDATE {$this->db->dbPrefix}advancedreports SET title=?, description=? WHERE id = ?", array($title, $description, $id));} function deleteReport($id){$this->db->ZZH77("DELETE FROM {$this->db->dbPrefix}advancedreports WHERE id = ?", array($id));} function ZZZZb1($ZZZZc2="*", $ZZZZd3="", $limit=1){$query = "SELECT $ZZZZc2 FROM {$this->db->dbPrefix}advancedreports";if(!empty($ZZZZd3)){$query .= " WHERE $ZZZZd3";} if((int)$limit>0){$query.= " ORDER BY id ";$query.= ZZZZZZZm12::ZZZZZZZC22(0, $limit);} $query.=";";$report = $this->db->run_query_allrecords($query);foreach($report as &$ZZZZZZZD33) {$ZZZZZZZD33 = PlatformConnector::ZZZZZZE44($ZZZZZZZD33);} return $report;} function loadReport($id){$ZZS1818 = null;$ZZS1818 = $this->db->run_query_allrecords("SELECT * FROM {$this->db->dbPrefix}advancedreports WHERE id = ". (int)$id);if($ZZS1818){$ZZS1818 = $ZZS1818[0];$ZZS1818["related_data"] = json_decode($ZZS1818["related_data"],true);for($Zf5 = 0;$Zf5<count($ZZS1818['related_data']);$Zf5++){for($ZZZZa0 = 0;$ZZZZa0 <= 11;$ZZZZa0++) {if(!isset($ZZS1818["related_data"][$Zf5][$ZZZZa0])) {$ZZS1818["related_data"][$Zf5][$ZZZZa0] = false;}}}} $ZZS1818 = PlatformConnector::ZZZZZZE44($ZZS1818);return $ZZS1818;}}
;interface ZZZZZZZE44 {function ZZZZZZZF55();}
;class ZZZZZZZG66 {static protected $ZZZZZZZH77 = array("UNSIGNED" => "INT", "BLOB" => "varbinary(max)", "VARCHAR" => "NVARCHAR",);static function getType($type) {return self::$ZZZZZZZH77[$type];}} class ZZZZZZZI88 {static function ZZZZZZZz25() {return "SCOPE_IDENTITY()";} static function quote($ZZJ99) {return "[{$ZZJ99}]";} function ZZZZZZZJ99($ZZZu20) {return "SET IDENTITY_INSERT {$ZZZu20} ON";} function ZZZZZZZK1010($ZZZu20) {return "SET IDENTITY_INSERT {$ZZZu20} OFF";}} class ZZZZZZZL1111 implements ZZZZZZZE44 {protected $r17;function __construct($value) {$this->r17 = $value;} function ZZZZZZZF55() {return $this->r17;}} class ZZZZZZZM1212 implements ZZZZZZZE44 {protected $ZZZZc2;function __construct(array $ZZZZc2) {$this->ZZZZc2 = $ZZZZc2;} function ZZZZZZZF55() {return " " . implode(" + ", $this->ZZZZc2) . " ";}} class ZZZZZZZN1313 implements ZZZZZZZE44 {protected $ZZZZZZZO1414;protected $ZZZZZZZP1515;protected $ZZZZZZZQ1616;function __construct($ZZZZZZZO1414, $ZZZZZZZP1515, $ZZZZZZZQ1616) {$this->ZZZZZZZO1414 = $ZZZZZZZO1414;$this->ZZZZZZZP1515 = $ZZZZZZZP1515;$this->ZZZZZZZQ1616 = $ZZZZZZZQ1616;} function ZZZZZZZR1717($value) {$value = str_replace("'", "", $value);$ZZZZZZZS1818 = ZZZZZZZG66::getType("VARCHAR");if(is_numeric($value)) {$ZZZZZZZS1818 = ZZZZZZZG66::getType("UNSIGNED");} return $ZZZZZZZS1818;} function ZZZZZZZF55() {$ZZZZZZZT1919 = new ZZZZZZZU2020($this->ZZZZZZZP1515, $this->ZZZZZZZR1717($this->ZZZZZZZP1515));$ZZZZZZZP1515 = $ZZZZZZZT1919->ZZZZZZZF55();$ZZZZZZZT1919 = new ZZZZZZZU2020($this->ZZZZZZZQ1616, $this->ZZZZZZZR1717($this->ZZZZZZZQ1616));$ZZZZZZZQ1616 = $ZZZZZZZT1919->ZZZZZZZF55();return "IIF({$this->ZZZZZZZO1414}, {$ZZZZZZZP1515}, {$ZZZZZZZQ1616})";}} class ZZZZZZZV2121 implements ZZZZZZZE44 {protected $ZZZZZZZW2222;protected $ZZZZZz25 = array();protected $ZZZZZZZX2323;function __construct($ZZZZZZZW2222, array $ZZZZZz25) {$this->ZZZZZZZW2222 = $ZZZZZZZW2222;$this->ZZZZZz25 = $ZZZZZz25;} function ZZZZZZZF55() {$ZZZZZZZY2424 = 0;$ZZZZZZZZ2525 = array_keys($this->ZZZZZz25);$ZY2424 = "";$ZY2424 .= " CASE {$this->ZZZZZZZW2222} ";foreach ($ZZZZZZZZ2525 as $ZZZZZZZZa0) {$ZY2424 .= " WHEN '{$ZZZZZZZZa0}' THEN {$ZZZZZZZY2424} ";$ZZZZZZZY2424++;} $ZY2424 .= " ELSE {$ZZZZZZZY2424} END ";return $ZY2424;}} class ZZZZZZZZb1 implements ZZZZZZZE44 {protected $ZZZZZZZW2222;function __construct($ZZZZZZZW2222) {$this->ZZZZZZZW2222 = $ZZZZZZZW2222;} function ZZZZZZZF55() {return " LEN($this->ZZZZZZZW2222) ";}} class ZZZZZZZZc2 implements ZZZZZZZE44 {protected $ZZZZZZZW2222;protected $ZO1414;protected $Zl11;function __construct($ZZZZZZZW2222, $ZO1414, $Zl11) {$this->ZZZZZZZW2222 = $ZZZZZZZW2222;$this->ZO1414 = $ZO1414;$this->Zl11 = $Zl11;} function ZZZZZZZF55() {return " SUBSTRING({$this->ZZZZZZZW2222}, {$this->ZO1414}, {$this->Zl11}) ";}} class ZZZZZZZZd3 implements ZZZZZZZE44 {protected $ZZZZZZZZe4;protected $ZZn13;function __construct($ZZZZZZZZe4, $ZZn13) {$this->ZZZZZZZZe4 = $ZZZZZZZZe4;$this->count = $ZZn13;} function ZZZZZZZF55() {return " OFFSET {$this->ZZZZZZZZe4} ROWS FETCH NEXT {$this->count} ROWS ONLY ";}} class ZZZZZZZZf5 {static function getInstance($ZZZZZZZZg6, $ZZZZZZZZh7) {switch($ZZZZZZZZg6) {case 'DATE': return new ZZZZZZZZi8($ZZZZZZZZh7);break;case 'WEEK': return new ZZZZZZZZj9($ZZZZZZZZh7);break;case 'YEAR': return new ZZZZZZZZk10($ZZZZZZZZh7);break;case 'MONTH': return new ZZZZZZZZl11($ZZZZZZZZh7);break;case 'QUARTER': return new ZZZZZZZZm12($ZZZZZZZZh7);break;case 'HOUR': return new ZZZZZZZZn13($ZZZZZZZZh7);break;case 'MINUTE': return new ZZZZZZZZo14($ZZZZZZZZh7);break;case 'SECOND': return new ZZZZZZZZp15($ZZZZZZZZh7);break;case 'MICROSECOND': return new ZZZZZZZZq16($ZZZZZZZZh7);break;}}} class ZZZZZZZZi8 implements ZZZZZZZE44 {protected $ZZZZZZZW2222;function __construct($ZZZZZZZW2222) {$this->ZZZZZZZW2222 = $ZZZZZZZW2222;} function ZZZZZZZF55() {return " FORMAT({$this->ZZZZZZZW2222}, 'yyyy-MM-dd') ";}} class ZZZZZZZZr17 implements ZZZZZZZE44 {protected $ZZZZZZZW2222;protected $value;protected $type;function __construct($ZZZZZZZW2222, $value, $type) {$this->ZZZZZZZW2222 = $ZZZZZZZW2222;$this->value = $value;$this->type = $type;} function ZZZZZZZF55() {return " DATEADD({$this->type}, {$this->value}, {$this->ZZZZZZZW2222}) ";}} class ZZZZZZZZs18 implements ZZZZZZZE44 {function ZZZZZZZF55() {return "GETDATE()";}} class ZZZZZZZZj9 implements ZZZZZZZE44 {protected $ZZZZZZZW2222;function __construct($ZZZZZZZW2222) {$this->ZZZZZZZW2222 = $ZZZZZZZW2222;} function ZZZZZZZF55() {return " CAST(DATEPART(wk, {$this->ZZZZZZZW2222}) AS nvarchar) ";}} class ZZZZZZZZk10 implements ZZZZZZZE44 {protected $ZZZZZZZW2222;function __construct($ZZZZZZZW2222) {$this->ZZZZZZZW2222 = $ZZZZZZZW2222;} function ZZZZZZZF55() {return " CAST(DATEPART(yy, {$this->ZZZZZZZW2222}) AS nvarchar) ";}} class ZZZZZZZZl11 implements ZZZZZZZE44 {protected $ZZZZZZZW2222;function __construct($ZZZZZZZW2222) {$this->ZZZZZZZW2222 = $ZZZZZZZW2222;} function ZZZZZZZF55() {return " CAST(DATEPART(mm, {$this->ZZZZZZZW2222}) AS nvarchar) ";}} class ZZZZZZZZm12 implements ZZZZZZZE44 {protected $ZZZZZZZW2222;function __construct($ZZZZZZZW2222) {$this->ZZZZZZZW2222 = $ZZZZZZZW2222;} function ZZZZZZZF55() {return " CAST(DATEPART(qq, {$this->ZZZZZZZW2222}) AS nvarchar) ";}} class ZZZZZZZZn13 implements ZZZZZZZE44 {protected $ZZZZZZZW2222;function __construct($ZZZZZZZW2222) {$this->ZZZZZZZW2222 = $ZZZZZZZW2222;} function ZZZZZZZF55() {return " DATEPART(hh, {$this->ZZZZZZZW2222}) ";}} class ZZZZZZZZo14 implements ZZZZZZZE44 {protected $ZZZZZZZW2222;function __construct($ZZZZZZZW2222) {$this->ZZZZZZZW2222 = $ZZZZZZZW2222;} function ZZZZZZZF55() {return " DATEPART(mi, {$this->ZZZZZZZW2222}) ";}} class ZZZZZZZZp15 implements ZZZZZZZE44 {protected $ZZZZZZZW2222;function __construct($ZZZZZZZW2222) {$this->ZZZZZZZW2222 = $ZZZZZZZW2222;} function ZZZZZZZF55() {return " DATEPART(ss, {$this->ZZZZZZZW2222}) ";}} class ZZZZZZZZq16 implements ZZZZZZZE44 {protected $ZZZZZZZW2222;function __construct($ZZZZZZZW2222) {$this->ZZZZZZZW2222 = $ZZZZZZZW2222;} function ZZZZZZZF55() {return " DATEPART(mcs, {$this->ZZZZZZZW2222}) ";}} class ZZZZZZZZt19 implements ZZZZZZZE44 {protected $Zu20;protected $value;function __construct($Zu20, $value = null) {$this->key = $Zu20;$this->value = $value;} function ZZZZZZZF55() {if($this->key == 'names') {return '';} if($this->key == 'default_week_format') {return '';}}} class ZZZZZZZZu20 implements ZZZZZZZE44 {protected $ZZZZZZZW2222;protected $ZZZZZZZZv21;protected $ZZZZZZZZw22;function __construct($ZZZZZZZW2222, $ZZZZZZZZv21, $ZZZZZZZZw22) {$this->ZZZZZZZW2222 = $ZZZZZZZW2222;$this->ZZZZZZZZv21 = $ZZZZZZZZv21;$this->ZZZZZZZZw22 = $ZZZZZZZZw22;} function ZZZZZZZF55() {$ZZZZZZZZe4 = new ZZZZZZZU2020($this->ZZZZZZZW2222, "DATETIMEOFFSET");$ZZZZZZZW2222 = "SWITCHOFFSET({$ZZZZZZZZe4->ZZZZZZZF55()}, '{$this->ZZZZZZZZw22}')";$ZZZZZZZT1919 = new ZZZZZZZU2020($ZZZZZZZW2222, "DATETIME");return $ZZZZZZZT1919->ZZZZZZZF55();}} class ZZZZZZZU2020 implements ZZZZZZZE44 {protected $r17;protected $type;protected $ZZZZZZZZx23;function __construct($r17, $type, $ZZZZZZZZx23 = null) {$this->r17 = $r17;$this->type = $type;$this->ZZZZZZZZx23 = $ZZZZZZZZx23;} function ZZZZZZZF55() {$ZY2424 = "";$ZY2424 .= " CONVERT({$this->type}, {$this->r17}";if($this->ZZZZZZZZx23) {$ZY2424 .= ", {$this->ZZZZZZZZx23}";} $ZY2424 .= ") ";return $ZY2424;}} class ZZZZZZZZy24 implements ZZZZZZZE44 {function __construct() {} function ZZZZZZZF55() {return "CAST(GETDATE() AS DATE)";}} class ZZZZZZZZz25 implements ZZZZZZZE44 {protected $name;function __construct($name) {$this->name = $name;} function ZZZZZZZF55() {return "#{$this->name}";}} class ZZZZZZZZA00 implements ZZZZZZZE44 {protected $name;protected $query;function __construct($name, $query) {$this->name = $name;$this->query = $query;} function ZZZZZZZF55() {$ZZZZZZZZB11 = new ZZZZZZZZC22($this->name);$ZZZZZZZZD33 = $ZZZZZZZZB11->ZZZZZZZF55();$ZZZZZZZZE44 = " SELECT * INTO {$this->name} FROM ({$this->query}) AS combinedTemporaryTable";return implode(";\n\r ", array($ZZZZZZZZD33, $ZZZZZZZZE44));}} class ZZZZZZZZC22 implements ZZZZZZZE44 {protected $name;function __construct($name) {$this->name = $name;} function ZZZZZZZF55() {return "IF OBJECT_ID('tempdb..{$this->name}') IS NOT NULL DROP TABLE {$this->name}";}} class ZZZZZZZZF55 implements ZZZZZZZE44 {protected $ZZZZZZZZG66;function __construct($ZZZZZZZZG66) {$this->ZZZZZZZZG66 = $ZZZZZZZZG66;} function ZZZZZZZF55() {return "{$this->ZZZZZZZZG66}";}} class ZZZZZZZZH77 implements ZZZZZZZE44 {protected $ZZZZZZZZI88;protected $type;protected $ZZZZZZZZJ99;protected $ZZZZZZZZK1010;function __construct($ZZZZZZZZI88="+", $type="day", $ZZZZZZZZK1010, $ZZZZZZZZJ99) {$this->ZZZZZZZZI88 = $ZZZZZZZZI88;$this->type = $type;$this->ZZZZZZZZK1010 = $ZZZZZZZZK1010;$this->ZZZZZZZZJ99 = $ZZZZZZZZJ99;} function ZZZZZZZF55() {return "DATEADD({$this->type}, {$this->ZZZZZZZZI88}{$this->ZZZZZZZZK1010}, $this->ZZZZZZZZJ99)";}} class ZZZZZZZZL1111 implements ZZZZZZZE44 {protected $ZZZZZZZZM1212;function __construct($ZZZZZZZZM1212) {$this->ZZZZZZZZM1212 = $ZZZZZZZZM1212;} function ZZZZZZZF55() {return " COLLATE {$this->ZZZZZZZZM1212} ";}}
;class ZZZZZZZZN1313 {static protected $ZZZZZZZH77 = array("UNSIGNED" => "UNSIGNED", "BLOB" => "BLOB", "VARCHAR" => "VARCHAR",);static function getType($type) {return self::$ZZZZZZZH77[$type];}} class ZZZZZZZZO1414 {static function ZZZZZZZz25() {return "last_insert_id()";} static function quote($ZZJ99) {return "`{$ZZJ99}`";} function ZZZZZZZJ99($ZZZu20) {return "";} function ZZZZZZZK1010($ZZZu20) {return "";}} class ZZZZZZZZP1515 implements ZZZZZZZE44 {protected $r17;function __construct($value) {$this->r17 = $value;} function ZZZZZZZF55() {return $this->r17;}} class ZZZZZZZZQ1616 implements ZZZZZZZE44 {protected $ZZZZc2;function __construct(array $ZZZZc2) {$this->ZZZZc2 = $ZZZZc2;} function ZZZZZZZF55() {return " CONCAT(".implode(",", $this->ZZZZc2).") ";}} class ZZZZZZZZR1717 implements ZZZZZZZE44 {protected $ZZZZZZZO1414;protected $ZZZZZZZP1515;protected $ZZZZZZZQ1616;function __construct($ZZZZZZZO1414, $ZZZZZZZP1515, $ZZZZZZZQ1616) {$this->ZZZZZZZO1414 = $ZZZZZZZO1414;$this->ZZZZZZZP1515 = $ZZZZZZZP1515;$this->ZZZZZZZQ1616 = $ZZZZZZZQ1616;} function ZZZZZZZF55() {return "IF({$this->ZZZZZZZO1414}, {$this->ZZZZZZZP1515}, {$this->ZZZZZZZQ1616})";}} class ZZZZZZZZS1818 implements ZZZZZZZE44 {protected $ZZZZZZZW2222;protected $ZZZZZz25 = array();protected $ZZZZZZZX2323;function __construct($ZZZZZZZW2222, array $ZZZZZz25) {$this->ZZZZZZZW2222 = $ZZZZZZZW2222;$this->ZZZZZz25 = $ZZZZZz25;} function ZZZZZZZF55() {$ZZZZZZZZ2525 = array_keys($this->ZZZZZz25);foreach ($ZZZZZZZZ2525 as &$ZZZZZZZZa0) {$ZZZZZZZZa0 = "'{$ZZZZZZZZa0}'";} $ZZZZZZZZ2525 = implode(",", $ZZZZZZZZ2525);return " FIELD({$this->ZZZZZZZW2222}, {$ZZZZZZZZ2525}) ";}} class ZZZZZZZZT1919 implements ZZZZZZZE44 {protected $ZZZZZZZW2222;function __construct($ZZZZZZZW2222) {$this->ZZZZZZZW2222 = $ZZZZZZZW2222;} function ZZZZZZZF55() {return " LENGTH($this->ZZZZZZZW2222) ";}} class ZZZZZZZZU2020 implements ZZZZZZZE44 {protected $ZZZZZZZW2222;protected $ZO1414;protected $Zl11;function __construct($ZZZZZZZW2222, $ZO1414, $Zl11) {$this->ZZZZZZZW2222 = $ZZZZZZZW2222;$this->ZO1414 = $ZO1414;$this->Zl11 = $Zl11;} function ZZZZZZZF55() {return " MID({$this->ZZZZZZZW2222}, {$this->ZO1414}, {$this->Zl11}) ";}} class ZZZZZZZZV2121 implements ZZZZZZZE44 {protected $ZZZZZZZZe4;protected $ZZn13;function __construct($ZZZZZZZZe4, $ZZn13) {$this->ZZZZZZZZe4 = $ZZZZZZZZe4;$this->count = $ZZn13;} function ZZZZZZZF55() {return " LIMIT {$this->ZZZZZZZZe4}, {$this->count} ";}} class ZZZZZZZZW2222 {static function getInstance($ZZZZZZZZg6, $ZZZZZZZZh7) {switch($ZZZZZZZZg6) {case 'DATE': return new ZZZZZZZZX2323($ZZZZZZZZh7);break;case 'WEEK': return new ZZZZZZZZY2424($ZZZZZZZZh7);break;case 'YEAR': return new ZZZZZZZZZ2525($ZZZZZZZZh7);break;case 'MONTH': return new ZZZZZZZZZa0($ZZZZZZZZh7);break;case 'QUARTER': return new ZZZZZZZZZb1($ZZZZZZZZh7);break;case 'HOUR': return new ZZZZZZZZZc2($ZZZZZZZZh7);break;case 'MINUTE': return new ZZZZZZZZZd3($ZZZZZZZZh7);break;case 'SECOND': return new ZZZZZZZZZe4($ZZZZZZZZh7);break;case 'MICROSECOND': return new ZZZZZZZZZf5($ZZZZZZZZh7);break;}}} class ZZZZZZZZX2323 implements ZZZZZZZE44 {protected $ZZZZZZZW2222;function __construct($ZZZZZZZW2222) {$this->ZZZZZZZW2222 = $ZZZZZZZW2222;} function ZZZZZZZF55() {return " DATE({$this->ZZZZZZZW2222}) ";}} class ZZZZZZZZZg6 implements ZZZZZZZE44 {protected $ZZZZZZZW2222;protected $value;protected $type;function __construct($ZZZZZZZW2222, $value, $type) {$this->ZZZZZZZW2222 = $ZZZZZZZW2222;$this->value = $value;$this->type = $type;} function ZZZZZZZF55() {if($this->value < 0) {$this->value = abs($this->value);return " DATE_SUB({$this->ZZZZZZZW2222}, INTERVAL {$this->value} {$this->type}) ";} else {return " DATE_ADD({$this->ZZZZZZZW2222}, INTERVAL {$this->value} {$this->type}) ";}}} class ZZZZZZZZZh7 implements ZZZZZZZE44 {function ZZZZZZZF55() {return "NOW()";}} class ZZZZZZZZY2424 implements ZZZZZZZE44 {protected $ZZZZZZZW2222;function __construct($ZZZZZZZW2222) {$this->ZZZZZZZW2222 = $ZZZZZZZW2222;} function ZZZZZZZF55() {return " WEEK({$this->ZZZZZZZW2222}) ";}} class ZZZZZZZZZ2525 implements ZZZZZZZE44 {protected $ZZZZZZZW2222;function __construct($ZZZZZZZW2222) {$this->ZZZZZZZW2222 = $ZZZZZZZW2222;} function ZZZZZZZF55() {return " YEAR({$this->ZZZZZZZW2222}) ";}} class ZZZZZZZZZa0 implements ZZZZZZZE44 {protected $ZZZZZZZW2222;function __construct($ZZZZZZZW2222) {$this->ZZZZZZZW2222 = $ZZZZZZZW2222;} function ZZZZZZZF55() {return " MONTH({$this->ZZZZZZZW2222}) ";}} class ZZZZZZZZZb1 implements ZZZZZZZE44 {protected $ZZZZZZZW2222;function __construct($ZZZZZZZW2222) {$this->ZZZZZZZW2222 = $ZZZZZZZW2222;} function ZZZZZZZF55() {return " QUARTER({$this->ZZZZZZZW2222}) ";}} class ZZZZZZZZZc2 implements ZZZZZZZE44 {protected $ZZZZZZZW2222;function __construct($ZZZZZZZW2222) {$this->ZZZZZZZW2222 = $ZZZZZZZW2222;} function ZZZZZZZF55() {return " HOUR({$this->ZZZZZZZW2222}) ";}} class ZZZZZZZZZd3 implements ZZZZZZZE44 {protected $ZZZZZZZW2222;function __construct($ZZZZZZZW2222) {$this->ZZZZZZZW2222 = $ZZZZZZZW2222;} function ZZZZZZZF55() {return " MINUTE({$this->ZZZZZZZW2222}) ";}} class ZZZZZZZZZe4 implements ZZZZZZZE44 {protected $ZZZZZZZW2222;function __construct($ZZZZZZZW2222) {$this->ZZZZZZZW2222 = $ZZZZZZZW2222;} function ZZZZZZZF55() {return " SECOND({$this->ZZZZZZZW2222}) ";}} class ZZZZZZZZZf5 implements ZZZZZZZE44 {protected $ZZZZZZZW2222;function __construct($ZZZZZZZW2222) {$this->ZZZZZZZW2222 = $ZZZZZZZW2222;} function ZZZZZZZF55() {return " MICROSECOND({$this->ZZZZZZZW2222}) ";}} class ZZZZZZZZZi8 implements ZZZZZZZE44 {protected $Zu20;protected $value;function __construct($Zu20, $value = null) {$this->key = $Zu20;$this->value = $value;} function ZZZZZZZF55() {if($this->key == 'names') {return "SET {$this->key} {$this->value};";} else {return "SET {$this->key} = {$this->value};";}}} class ZZZZZZZZZj9 implements ZZZZZZZE44 {protected $ZZZZZZZW2222;protected $ZZZZZZZZv21;protected $ZZZZZZZZw22;function __construct($ZZZZZZZW2222, $ZZZZZZZZv21, $ZZZZZZZZw22) {$this->ZZZZZZZW2222 = $ZZZZZZZW2222;$this->ZZZZZZZZv21 = $ZZZZZZZZv21;$this->ZZZZZZZZw22 = $ZZZZZZZZw22;} function ZZZZZZZF55() {return "CONVERT_TZ({$this->ZZZZZZZW2222}, \"{$this->ZZZZZZZZv21}\", \"{$this->ZZZZZZZZw22}\")";}} class ZZZZZZZZZk10 implements ZZZZZZZE44 {protected $r17;function __construct($r17, $type = false) {$this->r17 = $r17;} function ZZZZZZZF55() {return "{$this->r17}";}} class ZZZZZZZZZl11 implements ZZZZZZZE44 {protected $name;function __construct($name) {$this->name = $name;} function ZZZZZZZF55() {return "{$this->name}";}} class ZZZZZZZZZm12 implements ZZZZZZZE44 {protected $name;protected $query;function __construct($name, $query) {$this->name = $name;$this->query = $query;} function ZZZZZZZF55() {return "CREATE TEMPORARY TABLE IF NOT EXISTS {$this->name} AS {$this->query}";}} class ZZZZZZZZZn13 implements ZZZZZZZE44 {protected $name;function __construct($name) {$this->name = $name;} function ZZZZZZZF55() {return "DROP TEMPORARY TABLE IF EXISTS {$this->name}";}} class ZZZZZZZZZo14 implements ZZZZZZZE44 {protected $ZZZZZZZZG66;function __construct($ZZZZZZZZG66) {$this->ZZZZZZZZG66 = $ZZZZZZZZG66;} function ZZZZZZZF55() {return "{$this->ZZZZZZZZG66}";}} class ZZZZZZZZZp15 implements ZZZZZZZE44 {function __construct() {} function ZZZZZZZF55() {return "CURDATE()";}} class ZZZZZZZZZq16 implements ZZZZZZZE44 {protected $ZZZZZZZZI88;protected $type;protected $ZZZZZZZZJ99;protected $ZZZZZZZZK1010;function __construct($ZZZZZZZZI88="+", $type="day", $ZZZZZZZZK1010, $ZZZZZZZZJ99) {$this->ZZZZZZZZI88 = $ZZZZZZZZI88;$this->type = $type;$this->ZZZZZZZZK1010 = $ZZZZZZZZK1010;$this->ZZZZZZZZJ99 = $ZZZZZZZZJ99;} function ZZZZZZZF55() {return "$this->ZZZZZZZZJ99 {$this->ZZZZZZZZI88} INTERVAL {$this->ZZZZZZZZK1010} {$this->type}";}} class ZZZZZZZZZr17 implements ZZZZZZZE44 {protected $ZZZZZZZZM1212;function __construct($ZZZZZZZZM1212) {$this->ZZZZZZZZM1212 = $ZZZZZZZZM1212;} function ZZZZZZZF55() {return " COLLATE {$this->ZZZZZZZZM1212} ";}}
;class ZZZZZZZm12 {static function ZZZZZZZR1717($type) {if(PlatformConnector::ZZZZZZI88() == "mysql") {return ZZZZZZZZN1313::getType($type);} else {return ZZZZZZZG66::getType($type);}} static function ZZZZZZZy24($r17) {return '0x'.strtoupper(bin2hex($r17));} static function ZZZZZZZz25() {if(PlatformConnector::ZZZZZZI88() == "mysql") {return ZZZZZZZZO1414::ZZZZZZZz25();} else {return ZZZZZZZI88::ZZZZZZZz25();}} static function quote($ZZJ99) {if(PlatformConnector::ZZZZZZI88() == "mysql") {return ZZZZZZZZO1414::quote($ZZJ99);} else {return ZZZZZZZI88::quote($ZZJ99);}} static function ZZZZZZZJ99($ZZZu20) {if(PlatformConnector::ZZZZZZI88() == "mysql") {return ZZZZZZZZO1414::ZZZZZZZJ99($ZZZu20);} else {return ZZZZZZZI88::ZZZZZZZJ99($ZZZu20);}} static function ZZZZZZZK1010($ZZZu20) {if(PlatformConnector::ZZZZZZI88() == "mysql") {return ZZZZZZZZO1414::ZZZZZZZK1010($ZZZu20);} else {return ZZZZZZZI88::ZZZZZZZK1010($ZZZu20);}} static function ZZZZZZZZZs18(array $ZZZZc2) {if(PlatformConnector::ZZZZZZI88() == "mysql") {$ZZZZZZF55 = new ZZZZZZZZQ1616($ZZZZc2);} else {$ZZZZZZF55 = new ZZZZZZZM1212($ZZZZc2);} return $ZZZZZZF55->ZZZZZZZF55();} static function ZZZZZZZn13($ZZZZZZZO1414, $ZZZZZZZP1515, $ZZZZZZZQ1616) {if(PlatformConnector::ZZZZZZI88() == "mysql") {$ZZZZZZF55 = new ZZZZZZZZR1717($ZZZZZZZO1414, $ZZZZZZZP1515, $ZZZZZZZQ1616);} else {$ZZZZZZF55 = new ZZZZZZZN1313($ZZZZZZZO1414, $ZZZZZZZP1515, $ZZZZZZZQ1616);} return $ZZZZZZF55->ZZZZZZZF55();} static function ZZZZZZZZZt19($ZZZZZZZW2222, array $ZZZZZz25) {if(PlatformConnector::ZZZZZZI88() == "mysql") {$ZZZZZZF55 = new ZZZZZZZZS1818($ZZZZZZZW2222, $ZZZZZz25);} else {$ZZZZZZF55 = new ZZZZZZZV2121($ZZZZZZZW2222, $ZZZZZz25);} return $ZZZZZZF55->ZZZZZZZF55();} static function ZZZZZZZZZu20($ZZZZZZZW2222) {if(PlatformConnector::ZZZZZZI88() == "mysql") {$ZZZZZZF55 = new ZZZZZZZZT1919($ZZZZZZZW2222);} else {$ZZZZZZF55 = new ZZZZZZZZb1($ZZZZZZZW2222);} return $ZZZZZZF55->ZZZZZZZF55();} static function ZZZZZZZZZv21($ZZZZZZZW2222, $ZO1414, $Zl11) {if(PlatformConnector::ZZZZZZI88() == "mysql") {$ZZZZZZF55 = new ZZZZZZZZU2020($ZZZZZZZW2222, $ZO1414, $Zl11);} else {$ZZZZZZF55 = new ZZZZZZZZc2($ZZZZZZZW2222, $ZO1414, $Zl11);} return $ZZZZZZF55->ZZZZZZZF55();} static function ZZZZZZZC22($ZZZZZZZZe4, $ZZn13) {if(PlatformConnector::ZZZZZZI88() == "mysql") {$ZZZZZZF55 = new ZZZZZZZZV2121($ZZZZZZZZe4, $ZZn13);} else {$ZZZZZZF55 = new ZZZZZZZZd3($ZZZZZZZZe4, $ZZn13);} return $ZZZZZZF55->ZZZZZZZF55();} static function ZZZZZZZZZw22($ZZZZZZZZg6, $ZZZZZZZZh7) {if(PlatformConnector::ZZZZZZI88() == "mysql") {$ZZZZZZF55 = ZZZZZZZZW2222::getInstance($ZZZZZZZZg6, $ZZZZZZZZh7);} else {$ZZZZZZF55 = ZZZZZZZZf5::getInstance($ZZZZZZZZg6, $ZZZZZZZZh7);} return $ZZZZZZF55->ZZZZZZZF55();} static function getDate($ZZZZZZZW2222) {if(PlatformConnector::ZZZZZZI88() == "mysql") {$ZZZZZZF55 = new ZZZZZZZZX2323($ZZZZZZZW2222);} else {$ZZZZZZF55 = new ZZZZZZZZi8($ZZZZZZZW2222);} return $ZZZZZZF55->ZZZZZZZF55();} static function ZZZZZZZZZx23($ZZZZZZZW2222, $value, $type) {if(PlatformConnector::ZZZZZZI88() == "mysql") {$ZZZZZZF55 = new ZZZZZZZZZg6($ZZZZZZZW2222, $value, $type);} else {$ZZZZZZF55 = new ZZZZZZZZr17($ZZZZZZZW2222, $value, $type);} return $ZZZZZZF55->ZZZZZZZF55();} static function ZZZZZZZZZy24() {if(PlatformConnector::ZZZZZZI88() == "mysql") {$ZZZZZZF55 = new ZZZZZZZZZh7();} else {$ZZZZZZF55 = new ZZZZZZZZs18();} return $ZZZZZZF55->ZZZZZZZF55();} static function ZZZZZZZZZz25($ZZZZZZZW2222) {return self::ZZZZZZZZZw22("WEEK", $ZZZZZZZW2222);} static function ZZZZZZZZZA00($ZZZZZZZW2222) {return self::ZZZZZZZZZw22("YEAR", $ZZZZZZZW2222);} static function ZZZZZZZZZB11($ZZZZZZZW2222) {return self::ZZZZZZZZZw22("MONTH", $ZZZZZZZW2222);} static function ZZZZZZZZZC22($ZZZZZZZW2222) {return self::ZZZZZZZZZw22("QUARTER", $ZZZZZZZW2222);} static function ZZZZZZZZZD33($ZZZZZZZW2222) {return self::ZZZZZZZZZw22("HOUR", $ZZZZZZZW2222);} static function ZZZZZZZZZE44($ZZZZZZZW2222) {return self::ZZZZZZZZZw22("MINUTE", $ZZZZZZZW2222);} static function ZZZZZZZZZF55($ZZZZZZZW2222) {return self::ZZZZZZZZZw22("SECOND", $ZZZZZZZW2222);} static function ZZZZZZZZZG66($ZZZZZZZW2222) {return self::ZZZZZZZZZw22("MICROSECOND", $ZZZZZZZW2222);} static function ZZZZZZZZZH77() {if(PlatformConnector::ZZZZZZI88() == "mysql") {$ZZZZZZF55 = new ZZZZZZZZZp15();} else {$ZZZZZZF55 = new ZZZZZZZZy24();} return $ZZZZZZF55->ZZZZZZZF55();} static function ZZZZZZZZZI88($ZZZZZZZZI88, $type, $ZZZZZZZZK1010, $ZZZZZZZZJ99) {if(PlatformConnector::ZZZZZZI88() == "mysql") {$ZZZZZZF55 = new ZZZZZZZZZq16($ZZZZZZZZI88, $type, $ZZZZZZZZK1010, $ZZZZZZZZJ99);} else {$ZZZZZZF55 = new ZZZZZZZZH77($ZZZZZZZZI88, $type, $ZZZZZZZZK1010, $ZZZZZZZZJ99);} return $ZZZZZZF55->ZZZZZZZF55();} static function ZZZZZZZZZJ99($Zu20, $value = null) {if(PlatformConnector::ZZZZZZI88() == "mysql") {$ZZZZZZF55 = new ZZZZZZZZZi8($Zu20, $value);} else {$ZZZZZZF55 = new ZZZZZZZZt19($Zu20, $value);} return $ZZZZZZF55->ZZZZZZZF55();} static function ZZZZZZZZZK1010($ZZZZZZZW2222, $ZZZZZZZZv21, $ZZZZZZZZw22) {if(PlatformConnector::ZZZZZZI88() == "mysql") {$ZZZZZZF55 = new ZZZZZZZZZj9($ZZZZZZZW2222, $ZZZZZZZZv21, $ZZZZZZZZw22);} else {$ZZZZZZF55 = new ZZZZZZZZu20($ZZZZZZZW2222, $ZZZZZZZZv21, $ZZZZZZZZw22);} return $ZZZZZZF55->ZZZZZZZF55();} static function ZZZZZZZZZL1111($r17, $type = false) {if(PlatformConnector::ZZZZZZI88() == "mysql") {$ZZZZZZF55 = new ZZZZZZZZZk10($r17, $type);} else {$ZZZZZZF55 = new ZZZZZZZU2020($r17, $type);} return $ZZZZZZF55->ZZZZZZZF55();} static function ZZZZZZZZZM1212($name) {if(PlatformConnector::ZZZZZZI88() == "mysql") {$ZZZZZZF55 = new ZZZZZZZZZl11($name);} else {$ZZZZZZF55 = new ZZZZZZZZz25($name);} return $ZZZZZZF55->ZZZZZZZF55();} static function ZZZZZZZZZN1313($name, $query) {if(PlatformConnector::ZZZZZZI88() == "mysql") {$ZZZZZZF55 = new ZZZZZZZZZm12($name, $query);} else {$ZZZZZZF55 = new ZZZZZZZZA00($name, $query);} return $ZZZZZZF55->ZZZZZZZF55();} static function ZZZZZZZZZO1414($name) {if(PlatformConnector::ZZZZZZI88() == "mysql") {$ZZZZZZF55 = new ZZZZZZZZZn13($name);} else {$ZZZZZZF55 = new ZZZZZZZZC22($name);} return $ZZZZZZF55->ZZZZZZZF55();} static function ZZZZZZZZZP1515($ZZZZZZZZM1212) {if(PlatformConnector::ZZZZZZI88() == "mysql") {$ZZZZZZF55 = new ZZZZZZZZZr17($ZZZZZZZZM1212);} else {$ZZZZZZF55 = new ZZZZZZZZL1111($ZZZZZZZZM1212);} return $ZZZZZZF55->ZZZZZZZF55();}}
;class ARUser
{protected $id;protected $ZZZZe4 = false;protected $dateFormat = 'yyyy-mm-dd';protected $ZZZZZZs18 = 24;protected $ZZZZZZZa0 = 'UTC';protected $numberPreferences = array('format' => '123,456,789', 'seperator' => '', 'decimal' => '.',);protected $ZZZZZZZZZQ1616 = '';protected $name = '';protected $ZZZZZZZZZR1717 = array();function __construct(array $ZZZF55 = array()) {$this->ZZZZZZZZZS1818($ZZZF55);} function ZZZZZZZZZS1818(array $ZZZF55 = array()) {if(isset($ZZZF55['id'])) {$this->id = $ZZZF55['id'];} if(isset($ZZZF55['isAdmin'])) {$this->ZZZZe4 = $ZZZF55['isAdmin'];} if(isset($ZZZF55['numberPreferences'])) {$this->numberPreferences = $ZZZF55['numberPreferences'];} if(isset($ZZZF55['dateFormat'])) {$this->dateFormat = $ZZZF55['dateFormat'];} if(isset($ZZZF55['hourFormat'])) {$this->ZZZZZZs18 = $ZZZF55['hourFormat'];} if(isset($ZZZF55['timeZone'])) {$this->ZZZZZZZa0 = $ZZZF55['timeZone'];} if(isset($ZZZF55['email'])) {$this->ZZZZZZZZZQ1616 = $ZZZF55['email'];} if(isset($ZZZF55['name'])) {$this->name = $ZZZF55['name'];} if(isset($ZZZF55['roleIds'])) {$this->ZZZZZZZZZR1717 = $ZZZF55['roleIds'];}} function ZZZZZZO1414() {return $this->id;} function ZZZZZg6() {return $this->ZZZZe4;} function ZZZZZZZZZT1919() {return $this->dateFormat;} function ZZZZZZZZZU2020() {return $this->ZZZZZZs18;} function ZZZZZZZZZV2121() {return $this->numberPreferences;} function getTimeZone() {return $this->ZZZZZZZa0;} function ZZZZZZZZZW2222() {return $this->ZZZZZZZZZQ1616;} function ZZZZZZZZZX2323() {return $this->name;} function ZZZZZZZZZY2424() {return $this->ZZZZZZZZZR1717;} function ZZZZZZZZZZ2525(){$ZZZZZZZZZZa0 = get_object_vars($this);return $ZZZZZZZZZZa0;}}
;class ZZZZZZZZZZb1 {private $moduleName;private $ZZY2424;private $ZZZc2 = array();private $descriptor;private $ZZZZZZZZZZc2;private $ZZZo14 = -1;function __construct() {} function ZZZZZZZZZZd3() {return $this->moduleName;} function ZZZZZZZZZZe4($moduleName) {$this->moduleName = $moduleName;} function ZZZZZZZZZZf5() {return $this->ZZZc2;} function ZZZZZZZZZZg6() {$prefix = "m";$ZZZc2 = $this->ZZZZZZZZZZf5();$ZZZZZZZZZZh7 = array();$ZZT1919 = count($ZZZc2);$ZZZZZe4 = new ZZZZZf5();for($Zf5 = 0;$Zf5<$ZZT1919;$Zf5++){$ZZZc2[$Zf5]['fieldname_org'] = $ZZZc2[$Zf5]['fieldname'];$ZZZc2[$Zf5]['fieldname'] = $prefix.$this->ZZZZZZZZZZi8()."_".$this->moduleName."_".$ZZZc2[$Zf5]['fieldname'];$ZZZc2[$Zf5]['fieldlabel'] = $ZZZZZe4->ZZZZZw22($ZZZc2[$Zf5]['fieldlabel'],$this->moduleName);$ZZZc2[$Zf5]['module'] = $this->ZZZZZZZZZZi8();$ZZZZZZZZZZh7[$ZZZc2[$Zf5]['fieldname']] = $ZZZc2[$Zf5];} return $ZZZZZZZZZZh7;} function ZZZZZZZZZZj9($ZZZc2) {$this->ZZZc2 = $ZZZc2;} function ZZZZZZZZZZk10() {return $this->ZZY2424;} function ZZZZZZZZZZl11($ZZY2424) {$this->ZZY2424 = $ZZY2424;} function ZZZZZZZZZZm12() {return $this->descriptor;} function ZZZZZZZZZZn13($descriptor) {$this->descriptor = $descriptor;} function ZZZZZZZZZZo14() {return $this->ZZZZZZZZZZc2;} function ZZZZZZZZZZp15($ZZZZZZZZZZc2) {$this->ZZZZZZZZZZc2 = $ZZZZZZZZZZc2;} function ZZZZZZZZZZi8() {if($this->ZZZo14 === -1){throw new Exception("Module number not defined!");} return $this->ZZZo14;} function ZZZZZZZZZZq16($ZZZo14) {$this->ZZZo14 = $ZZZo14;} function ZZZZZZZZZZr17($name, $value) {$ZZZc2 = array();foreach ($this->ZZZZZZZZZZf5() as $field) {if (isset($field[$name]) && $field[$name] == $value) {$ZZZc2[] = $field;}} return $ZZZc2;} function ZZZZZZZZZZs18($name, $value) {$ZZZc2 = $this->ZZZZZZZZZZr17($name, $value);if (empty($ZZZc2)) {return false;} return $ZZZc2[0];}}
;class ZZZZZZZZZZt19 {private $ZZZZZZZZZZu20;function __construct($ZZZZZZZZZZu20) {for ($Zf5 = 0, $ZZZZZZZZZZv21 = count($ZZZZZZZZZZu20);$Zf5 < $ZZZZZZZZZZv21;$Zf5++) {$ZZZZZZZZZZw22 = ZZZZZZZZZZx23::ZZZb1($ZZZZZZZZZZu20[$Zf5]);$ZZZZZZZZZZw22->ZZZZZZZZZZq16($Zf5);$this->ZZZZZZZZZZu20[] = $ZZZZZZZZZZw22;}} function ZZZZZZl11() {return $this->ZZZZZZZZZZu20;} function ZZZZZZZZZZf5(){$ZZZc2 = array();foreach ($this->ZZZZZZZZZZu20 as $module) {$ZZZc2 = array_merge($ZZZc2, $module->ZZZZZZZZZZg6());} return $ZZZc2;}}
;class ZZZZZZZZZZx23{private static $ZZZZZZZZZZy24 = false;private static $ZZZZZZZZZZu20 = array();public static function ZZZb1($moduleName, $ZZZy24=false){if(ZZZZZZZZZZx23::$ZZZZZZZZZZy24 === false){ZZZZZZZZZZx23::$ZZZZZZZZZZy24 = ZZZk10::load('definitions', 'modules');} if(isset(ZZZZZZZZZZx23::$ZZZZZZZZZZu20[$moduleName])){return ZZZZZZZZZZx23::$ZZZZZZZZZZu20[$moduleName];} $module = new ZZZZZZZZZZb1();$module->ZZZZZZZZZZe4($moduleName);$ZZZc2 = ZZZZZZZZZZx23::ZZW2222($moduleName, $ZZZy24);$module->ZZZZZZZZZZj9($ZZZc2);$ZZZZZZZZZZz25 = ZZZZZZZZZZx23::ZZZZZZZZZZA00($moduleName);$module->ZZZZZZZZZZl11($ZZZZZZZZZZz25->table_name);$module->ZZZZZZZZZZn13($ZZZZZZZZZZz25);$module->ZZZZZZZZZZp15(ZZZZZZZZZZx23::ZZZz25($moduleName, $ZZZc2));ZZZZZZZZZZx23::$ZZZZZZZZZZu20[$moduleName] = $module;return $module;} private static function ZZW2222($module, $ZZZy24 = false){$ZZZ2525 = array();if(isset(ZZZZZZZZZZx23::$ZZZZZZZZZZy24[$module]) && isset(ZZZZZZZZZZx23::$ZZZZZZZZZZy24[$module]['fields'])){return ZZZZZZZZZZx23::$ZZZZZZZZZZy24[$module]['fields'];} $ZZZa0 = PlatformConnector::ZZZb1($module);if(!$ZZZa0) {return false;} $ZZY2424 = $ZZZa0->getTableName();$ZZZc2 = $ZZZa0->getFieldDefinitions();foreach($ZZZc2 as $field) {if(!isset($field['vname'])) {continue;} $ZZZd3 = ZZZZZZZZZZx23::ZZX2323($ZZY2424, $field, $ZZZy24);if($ZZZd3) {$ZZZ2525[] = $ZZZd3;}} if($module == 'oqc_Service') {$ZZZ2525[] = array('tablename' => "oqc_service", 'columnname' => "quantity * #alias#.price", 'fieldname' => "netprice", 'fieldlabel' => "LBL_NET_PRICE", 'uitype' => 'float', 'typeofdata' => 'N~M',);} return $ZZZ2525;} private static function ZZZZZZZZZZA00($module){$ZZS1818 = null;if(isset(ZZZZZZZZZZx23::$ZZZZZZZZZZy24[$module]) && isset(ZZZZZZZZZZx23::$ZZZZZZZZZZy24[$module]['tab_name_index'])){$ZZS1818 = array('tab_name_index' => ZZZZZZZZZZx23::$ZZZZZZZZZZy24[$module]['tab_name_index'], 'table_name' => ZZZZZZZZZZx23::$ZZZZZZZZZZy24[$module]['table_name'], 'table_index' => ZZZZZZZZZZx23::$ZZZZZZZZZZy24[$module]['table_index']);} $ZZZZZC22 = ($ZZS1818)? ((object) $ZZS1818): ($ZZS1818);if(!$ZZZZZC22){$ZZZZZC22 = PlatformConnector::ZZZb1($module);$ZZZZZF55 = 'id';$ZZS1818 = array('table_index' => $ZZZZZF55, 'table_name' => $ZZZZZC22->table_name, 'tab_name_index' => array(array('name' => $ZZZZZC22->table_name, 'idCol' => $ZZZZZF55), array('name' => $ZZZZZC22->table_name."_cstm", 'idCol' => $ZZZZZF55."_c")));} $ZZZZZC22 = ($ZZS1818)? ((object) $ZZS1818): ($ZZS1818);return $ZZZZZC22;} private static function ZZZz25($module, $ZZZc2){$ZZZA00 = array();$ZZZZZZZZZZB11 = array();foreach ($ZZZc2 as $field) {$ZZZZZZZZZZB11[$field['block']][] = $field;} foreach ($ZZZZZZZZZZB11 as $ZZZZZZZZZZC22 => $ZZZZZZZZZZD33) {$ZZZZZx23 = "---";$ZZZB11 = array('id' => $ZZZZZZZZZZC22, 'label' => $ZZZZZx23, 'fields' => $ZZZZZZZZZZD33,);$ZZZA00[] = $ZZZB11;} return $ZZZA00;} private static function ZZX2323($ZZY2424, $field, $ZZZy24=false) {$ZZZ2525 = array('tablename' => $ZZY2424, 'columnname' => $field['name'], 'fieldname' => $field['name'], 'fieldlabel' => $field['vname'], 'uitype' => $field['type'], 'typeofdata' => 'V~O', 'block' => '1',);if($field['name'] == 'id' && $ZZY2424 == 'users'){$ZZZ2525['uitype'] = 'assigned_user_name';$ZZZ2525['related_module'] = 'Users';$ZZZ2525['table'] = 'users';$ZZZ2525['id_name'] = 'id';$ZZZ2525['rname'] = 'user_name';} if(isset($field['audited'])){$ZZZ2525['audited'] = $field['audited'];} if(isset($field['function'])){$ZZZ2525['function'] = $field['function'];} if(isset($field['function_bean'])){$ZZZ2525['function_bean'] = $field['function_bean'];} if(isset($field['dbType'])) {$ZZZ2525['dbType'] = $field['dbType'];} if(isset($field['options'])) {$ZZZ2525['options'] = $field['options'];} if($field['type'] == 'link') {return false;} if(isset($field['source'])) {if(in_array($field['source'], array('non-db'))) {return false;} if($field['source'] == 'custom_fields') {$ZZZ2525['tablename'] = $ZZZ2525['tablename'] . '_cstm';}} if($ZZZy24){return $ZZZ2525;} if($field['vname'] == '') {return false;} if($field['type'] == 'relate') {if(!isset($field['module'])) {return false;} $ZZZ2525['related_module'] = $field['module'];$ZZZ2525['id_name'] = $field['id_name'];if(isset($field['table'])) {$ZZZ2525['table'] = $field['table'];} if(isset($field['rname'])) {$ZZZ2525['rname'] = $field['rname'];}} if($field['type'] == 'assigned_user_name') {$ZZZ2525['related_module'] = 'Users';$ZZZ2525['table'] = 'users';$ZZZ2525['id_name'] = 'id';if(isset($field['rname'])) {$ZZZ2525['rname'] = $field['rname'];}} return $ZZZ2525;}}
;